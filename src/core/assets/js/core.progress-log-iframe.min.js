(function(b,a){b.ProgressLogIframe=function(d,g){var e=null,f=a("#"+d+"-container"),c=f.find(".progress-log-view-details"),h=f.find(".progress-log-iframe");c.click(function(){var i=a(this);if(h.is(":visible")){h.hide();i.html("View Details")}else{h.show();i.html("Hide Details")}return false});a("#"+g).submit(function(){var l="",n=f.find(".progress-log-title"),k=f.find(".progress-log-progressbar-inner"),j=f.find(".progress-log-message"),m=h[0],i;i=function(){var q=m.contentDocument||m.contentWindow.document,o=(q.body?q.body.innerHTML:""),w="",s,u,r,x,p,v;if(o===l){return}w=o.substr(l.length);l=o;if(w.indexOf("<!--CLI-DATA:")!==-1){s=w.match(/<!--CLI-DATA:(.*?)-->/gm);for(u in s){r=s[u].substring(13,s[u].length-3);if(r.indexOf("PROGRESSBAR=")===0){k.css("width",r.substr(12)+"%")}else{if(r.indexOf("HEADER=")===0){p=r.substr(7);n.html(p)}else{if(r.indexOf("LINE=")===0&&r.indexOf(";TYPE=")!==-1){p=r.substring(5,r.indexOf(";TYPE="));x=r.substr(r.indexOf(";TYPE=")+6);if(x==="error"){v="icon-exclamation-triangle"}else{if(x==="warning"){v="icon-exclamation-circle"}else{v=""}}if(v){p='<i class="icon '+v+'"></i> '+p}j.html(p);if(x==="error"&&!h.is(":visible")){c.click()}}else{if(r.indexOf("LINE=")===0){j.html(r.substr(5))}else{console.log("Unknown parameter: "+r)}}}}}}};h.load(function(){clearInterval(e);i();k.css("width","100%");n.html("DONE")});k.css("width","0%");n.html("Loading...");f.show();e=setInterval(i,250)})}})(window.Core,window.jQuery);