$(function(){var b=$("body"),c={proxyicon:"cog",proxytext:"Controls",proxyforce:false,position:"right"},d=null,a=null,e=null;$(".controls").each(function(){var g=$(this),k=g.clone(),f=k.find("li").length,h={proxyicon:g.data("proxy-icon"),proxytext:g.data("proxy-text"),proxyforce:g.data("proxy-force"),position:g.data("position")},j;for(j in h){if(h[j]==undefined){h[j]=c[j]}}g.data("position",h.position);g.parent().append(k);b.append(g);g.addClass("context-menu").addClass("controls-hover");if(f==1){g.addClass("context-menu-one-link")}else{g.addClass("context-menu-many-links")}g.css("min-width",k.width());g.hide();if(f>3||h.proxyforce){k.html('<li><i class="icon-'+h.proxyicon+'"></i>'+(h.proxytext?" "+h.proxytext:"")+"</li>")}k.mouseenter(function(){var o=k.offset(),q=$("body").width(),n=5,l=g.data("position"),p,i,m;if(d){d.hide()}if(l=="bottom"){p={top:(o.top+k.height())+"px",left:o.left+"px"}}else{p={top:o.top+"px",left:(o.left+k.innerHeight())+"px"}}g.css(p);g.show();i=g.offset();m=g.width();if(i.left+m+n>q){g.css({left:(q-n-m)+"px"})}d=g;a=k}).mouseleave(function(){if(e){clearTimeout(e)}e=setTimeout(function(){if(a==null&&d){d.fadeOut()}},500);a=null});g.mouseenter(function(){a=g}).mouseleave(function(){a=null;if(e){clearTimeout(e)}e=setTimeout(function(){if(a==null&&d){d.fadeOut()}},500)})})});