$(function(){var b=$("body"),c={proxyIcon:"cog",proxyIconAnimation:"spin",proxyText:"Controls",proxyForce:null,position:"right"},d=null,a=null,e=null;$(".controls").each(function(){var h=$(this),m=h.clone(),g=m.find("li").length,j={proxyIcon:h.data("proxy-icon"),proxyText:h.data("proxy-text"),proxyForce:h.data("proxy-force"),position:h.data("position"),proxyIconAnimation:h.data("proxy-icon-animation")},l,f,k;if(h.data("spin")){j.proxyIconAnimation="spin"}else{if(h.data("bounce")){j.proxyIconAnimation="bounce"}else{if(h.data("float")){j.proxyIconAnimation="float"}}}for(l in j){if(j[l]===undefined){j[l]=c[l]}}h.data("position",j.position);h.parent().append(m);b.append(h);h.addClass("context-menu").addClass("controls-hover");if(g==1){h.addClass("context-menu-one-link")}else{h.addClass("context-menu-many-links")}h.css("min-width",m.width());h.hide();if((j.proxyForce===null&&g>3)||j.proxyForce===true||j.proxyForce===1||j.proxyForce==="1"){k=true}else{k=false}if(k){f="controls-proxy-icon icon-"+j.proxyIcon;if(j.proxyIconAnimation){f+=" icon-"+j.proxyIconAnimation;m.addClass("controls-animated")}m.addClass("controls-proxy").html('<li><i class="'+f+'"></i>'+(j.proxyText?" "+j.proxyText:"")+"</li>")}if(j.proxyIconAnimation){setTimeout(function(i){i.find(".controls-proxy-icon").removeClass("icon-"+j.proxyIconAnimation)},1000,m)}m.mouseenter(function(){var q=m.offset(),s=$("body").width(),p=5,n=h.data("position"),r,i,o;if(d){d.hide()}if(n==="bottom"){r={top:(q.top+m.height())+"px",left:q.left+"px"}}else{r={top:q.top+"px",left:(q.left+m.innerHeight())+"px"}}h.css(r);h.show();i=h.offset();o=h.width();if(i.left+o+p>s){h.css({left:(s-p-o)+"px"})}d=h;a=m;if(j.proxyIconAnimation){a.find(".controls-proxy-icon").addClass("icon-"+j.proxyIconAnimation);setTimeout(function(t){t.find(".controls-proxy-icon").removeClass("icon-"+j.proxyIconAnimation)},1000,a)}}).mouseleave(function(){if(e){clearTimeout(e)}e=setTimeout(function(){if(a==null&&d){d.fadeOut()}},500);a=null});h.mouseenter(function(){a=h}).mouseleave(function(){a=null;if(e){clearTimeout(e)}e=setTimeout(function(){if(a==null&&d){d.fadeOut()}},500)})})});