$(function(){var b=$("body"),c={proxyIcon:"cog",proxyIconAnimation:"spin",proxyText:"Controls",proxyforce:false,position:"right"},d=null,a=null,e=null;$(".controls").each(function(){var h=$(this),l=h.clone(),g=l.find("li").length,j={proxyIcon:h.data("proxy-icon"),proxyText:h.data("proxy-text"),proxyForce:h.data("proxy-force"),position:h.data("position"),proxyIconAnimation:h.data("proxy-icon-animation")},k,f;if(h.data("spin")){j.proxyIconAnimation="spin"}else{if(h.data("bounce")){j.proxyIconAnimation="bounce"}else{if(h.data("float")){j.proxyIconAnimation="float"}}}for(k in j){if(j[k]==undefined){j[k]=c[k]}}h.data("position",j.position);h.parent().append(l);b.append(h);h.addClass("context-menu").addClass("controls-hover");if(g==1){h.addClass("context-menu-one-link")}else{h.addClass("context-menu-many-links")}h.css("min-width",l.width());h.hide();if(g>3||j.proxyForce){f="controls-proxy-icon icon-"+j.proxyIcon;if(j.proxyIconAnimation){f+=" icon-"+j.proxyIconAnimation;l.addClass("controls-animated")}l.addClass("controls-proxy").html('<li><i class="'+f+'"></i>'+(j.proxyText?" "+j.proxyText:"")+"</li>")}if(j.proxyIconAnimation){setTimeout(function(i){i.find(".controls-proxy-icon").removeClass("icon-"+j.proxyIconAnimation)},1000,l)}l.mouseenter(function(){var p=l.offset(),r=$("body").width(),o=5,m=h.data("position"),q,i,n;if(d){d.hide()}if(m==="bottom"){q={top:(p.top+l.height())+"px",left:p.left+"px"}}else{q={top:p.top+"px",left:(p.left+l.innerHeight())+"px"}}h.css(q);h.show();i=h.offset();n=h.width();if(i.left+n+o>r){h.css({left:(r-o-n)+"px"})}d=h;a=l;if(j.proxyIconAnimation){a.find(".controls-proxy-icon").addClass("icon-"+j.proxyIconAnimation);setTimeout(function(s){s.find(".controls-proxy-icon").removeClass("icon-"+j.proxyIconAnimation)},1000,a)}}).mouseleave(function(){if(e){clearTimeout(e)}e=setTimeout(function(){if(a==null&&d){d.fadeOut()}},500);a=null});h.mouseenter(function(){a=h}).mouseleave(function(){a=null;if(e){clearTimeout(e)}e=setTimeout(function(){if(a==null&&d){d.fadeOut()}},500)})})});