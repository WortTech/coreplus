(function(b,a){a(function(){var e=a("body"),f={proxyIcon:"cog",proxyIconAnimation:"spin",proxyText:"Controls",proxyForce:null,position:"right"},g=null,d=null,h=null,c=b.Browser.is_mobile;a(".controls").each(function(){var l=a(this),p=l.clone(),k=p.find("li").length,m={proxyIcon:l.data("proxy-icon"),proxyText:l.data("proxy-text"),proxyForce:l.data("proxy-force"),onlyIcons:l.data("only-icons"),position:l.data("position"),proxyIconAnimation:l.data("proxy-icon-animation")},o,j,n;if(l.data("spin")){m.proxyIconAnimation="spin"}else{if(l.data("bounce")){m.proxyIconAnimation="bounce"}else{if(l.data("float")){m.proxyIconAnimation="float"}}}for(o in m){if(m[o]===undefined){m[o]=f[o]}}l.data("position",m.position);n=((m.proxyForce===null&&k>3)||m.proxyForce===true||m.proxyForce===1||m.proxyForce==="1");if(n){l.parent().append(p);e.append(l);l.addClass("context-menu").addClass("controls-hover");if(k===1){l.addClass("context-menu-one-link")}else{l.addClass("context-menu-many-links")}l.css("min-width",p.width());l.hide();j="controls-proxy-icon icon-"+m.proxyIcon;if(m.proxyIconAnimation){j+=" icon-"+m.proxyIconAnimation;p.addClass("controls-animated")}p.addClass("controls-proxy proxy").html('<li><i class="icon '+j+'"></i>'+(m.proxyText?" "+m.proxyText:"")+"</li>");if(m.onlyIcons===1){p.addClass("only-icons")}}else{l.addClass("no-proxy");if(m.onlyIcons===1){l.addClass("only-icons")}}if(m.proxyIconAnimation){setTimeout(function(i){i.find(".controls-proxy-icon").removeClass("icon-"+m.proxyIconAnimation)},1000,p)}p.mouseenter(function(){var t=p.offset(),v=a("body").width(),s=5,q=l.data("position"),u,i,r;if(g){g.hide()}if(q==="bottom"){u={top:(t.top+p.height())+"px",left:t.left+"px"}}else{u={top:t.top+"px",left:(t.left+p.innerHeight())+"px"}}l.css(u);l.show();i=l.offset();r=l.width();if(i.left+r+s>v){l.css({left:(v-s-r)+"px"})}g=l;d=p;if(m.proxyIconAnimation){d.find(".controls-proxy-icon").addClass("icon-"+m.proxyIconAnimation);setTimeout(function(w){w.find(".controls-proxy-icon").removeClass("icon-"+m.proxyIconAnimation)},1000,d)}}).mouseleave(function(){if(h){clearTimeout(h)}h=setTimeout(function(){if(d===null&&g){g.fadeOut()}},500);d=null});l.mouseenter(function(){d=l}).mouseleave(function(){d=null;if(h){clearTimeout(h)}h=setTimeout(function(){if(d===null&&g){g.fadeOut()}},500)});if(c){l.click(function(i){a(this).toggleClass("controls-open");if(a(this).hasClass("controls-open")){i.preventDefault()}})}})})})(window.Core,window.jQuery);