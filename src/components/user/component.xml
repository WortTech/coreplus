<?xml version="1.0"?>
<!DOCTYPE component PUBLIC "SYSTEM" "http://corepl.us/api/2_4/component.dtd">
<component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.7.0" name="User" execmode="web">
	<requires>
		<require name="core" type="component" version="2.7.0"/>
		<!-- User authentication events trigger security logs. -->
		<require name="security-suite" type="component" operation="ge" version="1.0.0"/>
		<!-- The password reset is now powered by the nonce system. -->
		<require name="nonce" type="component"/>
	</requires>
	<smartyplugins directory="helpers/smarty-plugins/"/>
	<hooks>
		<hookregister name="/user/postsave" description="Hook that is called after the user object is saved"/>
		<hookregister name="/core/controllinks/user/view" description="Control links when viewing a specific user" return="array"/>
		<hookregister name="/user/postlogin/getredirecturl" description="Hook that is called after the user has successfully logged in.  Return a non-empty string to redirect to that page." return="string"/>
		<hook name="/core/page/error-403" call="UserController::_HookHandler403"/>
		<hook call="User\Helper::RecordActivity" name="/core/page/postrender"/>
		<hook name="/core/controllinks/user/view" call="User\Helper::GetControlLinks"/>
		<hook name="/cron/daily" call="User\Helper::PurgeUserActivityCron"/>
	</hooks>
	<forms>
		<formelement name="access" class="FormAccessStringInput"/>
	</forms>
	<files>
		<file filename="CHANGELOG" md5="eb017342001c29fa73c31007a3d039c5"/>
		<file filename="User.class.php" md5="ea4b0aecd7b373b6364b17ce6055d36b"/>
		<file filename="User.class.php.DISABLED" md5="5b75b7a21702d689d67a2d591e7f3671"/>
		<file filename="UserForm.class.php" md5="9b35980a1e9cc350edfd73cf562570ba">
			<class name="FormAccessStringInput"/>
		</file>
		<file filename="User_Backend.interface.php" md5="63d5aacb720df1f034e6a76802dcf909">
			<interface name="User_Backend"/>
		</file>
		<file filename="backends/User_datamodel.backend.php" md5="1ad9e5ea8d20e7a62b604e8ced3040b9">
			<class name="User_datamodel_Backend"/>
		</file>
		<file filename="backends/User_facebook.backend.php" md5="36bcda51a9b1ba090e7ecedf66faa665">
			<class name="User_facebook_Backend"/>
		</file>
		<file filename="controllers/UserActivityController.php" md5="305240b5296d0467ed51d264d0a71cef">
			<controller name="UserActivityController"/>
		</file>
		<file filename="controllers/UserConfigController.php" md5="94c202fbd48a79df7820aa3e62328458">
			<controller name="UserConfigController"/>
		</file>
		<file filename="controllers/UserController.php" md5="4b8d263789eae9cd2ae15e306f807539">
			<controller name="UserController"/>
		</file>
		<file filename="controllers/UserGroupAdminController.php" md5="6bfb80a13116aebde4bf4a5c2062e2f3">
			<controller name="UserGroupAdminController"/>
		</file>
		<file filename="helpers/ImportHelper.php" md5="70fa1098a50c84cff0c1c26253e84723">
			<class name="User\ImportHelper"/>
		</file>
		<file filename="helpers/smarty-plugins/block.permission.php" md5="cd0d2f15873ae84eb6e0197781a5f6b7"/>
		<file filename="helpers/smarty-plugins/function.user.php" md5="e97b24197600ac7ca2f44c188c11644a"/>
		<file filename="lib/user/AuthDriverInterface.php" md5="ecb0f02e6bf0407ef30d73bbd9bd7791">
			<interface name="User\AuthDriverInterface"/>
		</file>
		<file filename="lib/user/Helper.php" md5="4b14804aee6e9208c7b0c9170d79696c">
			<class name="User\Helper"/>
		</file>
		<file filename="lib/user/authdrivers/datastore.php" md5="79294b55e430638c43357532eff3eeca">
			<class name="User\AuthDrivers\datastore"/>
		</file>
		<file filename="models/UserActivityModel.php" md5="5bd2bf8421845590f009e53f0288c898">
			<class name="UserActivityModel"/>
		</file>
		<file filename="models/UserConfigModel.php" md5="42386d28bf9e3beb92ba613f9ff999c1">
			<class name="UserConfigModel"/>
		</file>
		<file filename="models/UserGroupModel.php" md5="52b4653997c2ce3eb72dd6819ecc35b6">
			<class name="UserGroupModel"/>
		</file>
		<file filename="models/UserModel.php" md5="ba565ccd416ae8b8c1e82da79b406261">
			<class name="UserModel"/>
		</file>
		<file filename="models/UserUserConfigModel.php" md5="9011c85b1afb51a0184a253cdb7fff73">
			<class name="UserUserConfigModel"/>
		</file>
		<file filename="models/UserUserGroupModel.php" md5="44be7b5b0285f9c048ec226161da7052">
			<class name="UserUserGroupModel"/>
		</file>
		<file filename="upgrades/257_to_260.php" md5="3342d4db74259612ac60586a9c573fdb"/>
		<file filename="upgrades/261_to_262.php" md5="f980ebc7df2bcdb6cb3d553b96567d07"/>
		<file filename="upgrades/270_to_280_groups.php" md5="c9bf34310d9320c2396ec8a65bab8829"/>
		<file filename="widgets/UserAdminWidget.php" md5="aba6a7a45c1d64a512ea8de47e734c9c">
			<class name="UserAdminWidget"/>
		</file>
		<file filename="widgets/UserLoginWidget.class.php" md5="127b6dc23fed6b640d0741d274e8c56d">
			<class name="UserLoginWidget"/>
		</file>
		<file filename="widgets/UserWidget.class.php" md5="93107d6380c0e8d34fcc0de3644b995c">
			<class name="UserWidget"/>
		</file>
	</files>
	<view>
		<file filename="templates/emails/user/activation.tpl" md5="2894752e5f2b582bf16dd0eed82e14e9"/>
		<file filename="templates/emails/user/forgotpassword.tpl" md5="8463f6b3726164f63e8c838a58a28ba7"/>
		<file filename="templates/emails/user/initialpassword.tpl" md5="e1313d158e73c9104cd798ef5d5e39e7"/>
		<file filename="templates/emails/user/registration.tpl" md5="ee342d30eb7c14725eda1d42516765bf"/>
		<file filename="templates/forms/elements/formaccessstringinput.tpl" md5="17f3726f9dce3b79d27b079ff1b57975"/>
		<file filename="templates/includes/user/edit_create_contextgroups.tpl" md5="fe043ab28c1c3b3bd3dd0cdfeae2393f"/>
		<file filename="templates/pages/user/admin.tpl" md5="90bc407f58c982828e4d717a3063a4ea"/>
		<file filename="templates/pages/user/edit.tpl" md5="05c4df7b9aa3974a4af64a4d770c886d"/>
		<file filename="templates/pages/user/forgotpassword.tpl" md5="2dc6db0e125d8c729bac0081db90bfa4"/>
		<file filename="templates/pages/user/guest403.tpl" md5="336576c142f10bcd6c462e02d4e15853"/>
		<file filename="templates/pages/user/import1.tpl" md5="34d4a67fc553d310cef459dc9a288da9"/>
		<file filename="templates/pages/user/import2.tpl" md5="125ea1f03cae7d6395d56c0665570e52"/>
		<file filename="templates/pages/user/import3.tpl" md5="655994a8909458e93fa643349788621d"/>
		<file filename="templates/pages/user/login.tpl" md5="c036e9df1ef5e68868e02300c4bb3086"/>
		<file filename="templates/pages/user/me.tpl" md5="d1b0fb80fdd098d3a085a018232a0264"/>
		<file filename="templates/pages/user/password.tpl" md5="f03aa0a7377f78bff70374f79e050f64"/>
		<file filename="templates/pages/user/register.tpl" md5="05c4df7b9aa3974a4af64a4d770c886d"/>
		<file filename="templates/pages/useractivity/details.tpl" md5="64842bd2c660f8f88ecfcbbf70f81fd9"/>
		<file filename="templates/pages/useractivity/index.tpl" md5="90893b4472a5e60805afef1b16452dee"/>
		<file filename="templates/pages/userconfig/admin.tpl" md5="b052123c686d1e46bb6275fbed19eba9"/>
		<file filename="templates/pages/usergroupadmin/create.tpl" md5="6795037bf2dc9bde8b4043b07839db46"/>
		<file filename="templates/pages/usergroupadmin/create_update.tpl" md5="cac97db6a12607cf0c875ca26a3a3976"/>
		<file filename="templates/pages/usergroupadmin/index.tpl" md5="7213f34380dfb9d3df1faf33e0bb68c8"/>
		<file filename="templates/pages/usergroupadmin/update.tpl" md5="6795037bf2dc9bde8b4043b07839db46"/>
		<file filename="templates/widgets/user/login.tpl" md5="054c8c86b99b890e6490b96d3ff0c634"/>
		<file filename="templates/widgets/user/register.tpl" md5="6795037bf2dc9bde8b4043b07839db46"/>
		<file filename="templates/widgets/useradmin/newestsignups.tpl" md5="cc67ecdfbabbbb685c029ee7d8d55c12"/>
		<file filename="templates/widgets/userlogin/execute.tpl" md5="8b33f6adb9fdadf3a6f4e10f6722de2e"/>
	</view>
	<pages>
		<page baseurl="/user/login" admin="0" access="!g:authenticated" selectable="0" title="Login"/>
		<page baseurl="/user/register" admin="0" access="!g:authenticated" selectable="0" title="Register"/>
		<page baseurl="/user/logout" admin="0" access="g:authenticated" selectable="0" title="Logout"/>
		<page baseurl="/user/admin" admin="1" access="p:/user/users/manage" title="User Administration"/>
		<page baseurl="/usergroupadmin" admin="1" access="p:/user/groups/manage" title="User Group Administration"/>
		<page baseurl="/useractivity" admin="1" access="p:/user/activity/view" title="User Activity" group="Reporting"/>
		<page baseurl="/userconfig/admin" admin="1" access="g:admin" title="User Options" group="Configure"/>
	</pages>
	<widgets>
		<widget baseurl="/UserWidget/Login"/>
		<widget baseurl="/UserWidget/Register"/>
		<widget baseurl="/useradmin/newestsignups" title="Recent User Registrations" installable="/admin"/>
	</widgets>
	<configs>
		<config key="/user/register/requirecaptcha" type="boolean" default="0" description="If a captcha system is available, set to true to require it to be completed on the registration page."/>
		<config key="/user/password/minlength" type="int" default="8" description="Minimum password length for users."/>
		<config key="/user/password/requiresymbols" type="int" default="0" description="Minimum number of symbols in the password, ($@#*, etc)."/>
		<config key="/user/password/requirecapitals" type="int" default="0" description="Minumum number of capital letters in the password."/>
		<config key="/user/password/requirenumbers" type="int" default="0" description="Minumum number of numbers in the password."/>
		<config key="/user/displayas" type="enum" default="emailbase" options="emailfull|emailbase|username|firstname" description="The user field to use for displaying in representation of the user, ie: username or email.  If 'email' is used, the full email is displayed.  If 'emailbase' id used, just the prefix of the email is used."/>
		<config key="/user/displayname/anonymous" type="string" default="Guest" description="What to call guest/unauthenticated users."/>
		<config key="/user/backends" type="set" default="datamodel" description="" options="datamodel| facebook| ldap"/>
		<config key="/user/register/allowpublic" type="boolean" default="true" description="Allow public registrations"/>
		<config key="/user/register/requireapproval" type="boolean" default="false" description="Require administrative approvals on new accounts"/>
		<config key="/user/email/allowchanging" type="boolean" default="false" description="Allow the user to change his/her email address after account registration."/>
		<config key="/user/enableavatar" type="boolean" default="true" description="Set to false to disable the use of avatars throughout the system."/>
		<config key="/user/profileedits/requireapproval" type="boolean" default="false" description="If model auditing is available, it will be used to require administrative approval for profile edits."/>
		<config key="/user/activity/keephistory" type="enum" default="3-months" options="1-week|1-month|2-months|3-months|6-months|12-months|24-months|36-months|all" description="How long should the full verbose user activity be kept."/>
	</configs>
	<permissions>
		<permission key="/user/search/autocomplete" description="Search for users in the system via autocomplete widgets"/>
		<permission key="/user/users/manage" description="Manage site users"/>
		<permission key="/user/permissions/manage" description="Manage site permissions"/>
		<permission key="/user/groups/manage" description="Manage site groups"/>
		<permission key="/user/activity/view" description="View user activity and analytics"/>
	</permissions>
	<assets>
		<file filename="assets/css/user.css" md5="091b04c3f1466fbb00a32a7a51fc54cf"/>
		<file filename="assets/js/user/login.js" md5="12a1daec1bfee08eaf0839667b903bf0"/>
		<file filename="assets/js/user/user.js" md5="e5e4dc7f8ff932ce7acd330031dbeec2"/>
	</assets>
	<description>
		The user component provides core user functionality, including registration, login, forgot password and access controls.
	</description>
	<otherfiles>
		<file filename="helpers/smarty-plugins/block.permission.php" md5="f909ae6c68833e4dc221594f3472d94d"/>
	</otherfiles>
	<upgrades>
		<upgrade from="0.0.1-dev1" to="0.0.2"/>
		<upgrade from="0.0.2" to="0.0.3"/>
		<upgrade from="0.0.3" to="1.9.0"/>
		<upgrade from="1.9.0" to="1.9.1">
			<dataset action="update" table="widget">
				<datasetset key="baseurl">/userwidget/login</datasetset>
				<datasetwhere>
					baseurl = /UserLoginWidget/execute
				</datasetwhere>
			</dataset>
		</upgrade>
		<upgrade from="1.9.1" to="2.0.0"/>
		<upgrade from="2.0.0" to="2.0.1"/>
		<upgrade from="2.0.1" to="2.0.2"/>
		<upgrade from="2.0.2" to="2.0.3"/>
		<upgrade from="2.0.3" to="2.1.0"/>
		<upgrade from="2.1.0" to="2.1.1"/>
		<upgrade from="2.1.1" to="2.2.0"/>
		<upgrade from="2.2.0" to="2.2.1"/>
		<upgrade from="2.2.1" to="2.2.2"/>
		<upgrade from="2.2.2" to="2.2.3"/>
		<upgrade from="2.2.3" to="2.3.0"/>
		<upgrade from="2.3.0" to="2.3.1"/>
		<upgrade from="2.3.1" to="2.4.0"/>
		<upgrade from="2.4.0" to="2.4.1"/>
		<upgrade from="2.4.1" to="2.4.2"/>
		<upgrade from="2.4.2" to="2.4.3"/>
		<upgrade from="2.4.3" to="2.4.4b1"/>
		<upgrade from="2.4.4b1" to="2.4.4b2"/>
		<upgrade from="2.4.4b2" to="2.4.4"/>
		<upgrade from="2.4.4" to="2.4.5"/>
		<upgrade from="2.4.5" to="2.4.6"/>
		<upgrade from="2.4.6" to="2.5.0"/>
		<upgrade from="2.5.0" to="2.5.1"/>
		<upgrade from="2.5.1" to="2.5.2"/>
		<upgrade from="2.5.2" to="2.5.3"/>
		<upgrade from="2.5.3" to="2.5.4"/>
		<upgrade from="2.5.4" to="2.5.5"/>
		<upgrade from="2.5.5" to="2.5.6"/>
		<upgrade from="2.5.6" to="2.5.7"/>
		<upgrade from="2.5.7" to="2.6.0">
			<phpfileinclude>
				components/user/upgrades/257_to_260.php
			</phpfileinclude>
		</upgrade>
		<upgrade from="2.6.0" to="2.6.1"/>
		<upgrade from="2.6.1" to="2.7.0">
			<php file="upgrades/261_to_262.php"/>
		</upgrade>
		<upgrade from="2.6.2" to="2.7.0"/>
	</upgrades>
	<authors>
		<author name="Charlie Powell" email="charlie@eval.bz"/>
	</authors>
	<licenses>
		<license url="http://www.gnu.org/licenses/agpl-3.0.txt">
			GNU Affero General Public License v3
		</license>
	</licenses>
</component>

