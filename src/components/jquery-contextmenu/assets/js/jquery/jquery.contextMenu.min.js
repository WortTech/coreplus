// jQuery Context Menu Plugin
// @version 1.01~core2
if(jQuery){(function(){$.extend($.fn,{contextMenu:function(a,b){o=$.extend({menu:null,inSpeed:150,outSpeed:75},a);if(!o.menu){$.error("No context menu defined");return false}if(o.inSpeed==0){o.inSpeed=-1}if(o.outSpeed==0){o.outSpeed=-1}$(this).each(function(){var c=$(this),e=$(c).offset(),d;if(typeof o.menu.jquery=="undefined"){d=$("#"+o.menu)}else{d=o.menu}d.addClass("contextMenu");$(this).mousedown(function(g){var f=g;f.stopPropagation();$(this).mouseup(function(j){j.stopPropagation();var i=$(this);$(this).unbind("mouseup");if(f.button==2){$(".contextMenu").hide();if($(c).hasClass("disabled")){return false}var k={},h,l;if(self.innerHeight){k.pageYOffset=self.pageYOffset;k.pageXOffset=self.pageXOffset;k.innerHeight=self.innerHeight;k.innerWidth=self.innerWidth}else{if(document.documentElement&&document.documentElement.clientHeight){k.pageYOffset=document.documentElement.scrollTop;k.pageXOffset=document.documentElement.scrollLeft;k.innerHeight=document.documentElement.clientHeight;k.innerWidth=document.documentElement.clientWidth}else{if(document.body){k.pageYOffset=document.body.scrollTop;k.pageXOffset=document.body.scrollLeft;k.innerHeight=document.body.clientHeight;k.innerWidth=document.body.clientWidth}}}(j.pageX)?h=j.pageX:h=j.clientX+k.scrollLeft;(j.pageY)?l=j.pageY:l=j.clientY+k.scrollTop;$(document).unbind("click");d.css({top:l,left:h}).fadeIn(o.inSpeed);d.find("A").mouseover(function(){d.find("LI.hover").removeClass("hover");$(this).parent().addClass("hover")}).mouseout(function(){d.find("LI.hover").removeClass("hover")});$(document).keypress(function(m){switch(m.keyCode){case $.ui.keyCode.UP:if(d.find("LI.hover").size()==0){d.find("LI:last").addClass("hover")}else{d.find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover");if(d.find("LI.hover").size()==0){d.find("LI:last").addClass("hover")}}break;case $.ui.keyCode.DOWN:if(d.find("LI.hover").size()==0){d.find("LI:first").addClass("hover")}else{d.find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover");if(d.find("LI.hover").size()==0){d.find("LI:first").addClass("hover")}}break;case $.ui.keyCode.ENTER:d.find("LI.hover A").trigger("click");break;case $.ui.keyCode.ESCAPE:$(document).trigger("click");break}});d.find("A").unbind("click");d.find("LI:not(.disabled) A").click(function(){$(document).unbind("click").unbind("keypress");$(".contextMenu").hide();if(b){b($(this).attr("href").substr(1),$(i),{x:h-e.left,y:l-e.top,docX:h,docY:l})}return false});setTimeout(function(){$(document).click(function(){$(document).unbind("click").unbind("keypress");d.fadeOut(o.outSpeed);return false})},0)}})});d.each(function(){$(this).css({MozUserSelect:"none"});$(this).bind("selectstart.disableTextSelect",function(){return false});$(this).bind("mousedown.disableTextSelect",function(){return false})});$(c).add($("UL.contextMenu")).bind("contextmenu",function(){return false})});return $(this)},disableContextMenuItems:function(a){if(a==undefined){$(this).find("LI").addClass("disabled");return($(this))}$(this).each(function(){if(a!=undefined){var c=a.split(",");for(var b=0;b<c.length;b++){$(this).find('A[href="'+c[b]+'"]').parent().addClass("disabled")}}});return($(this))},enableContextMenuItems:function(a){if(a==undefined){$(this).find("LI.disabled").removeClass("disabled");return($(this))}$(this).each(function(){if(a!=undefined){var c=a.split(",");for(var b=0;b<c.length;b++){$(this).find('A[href="'+c[b]+'"]').parent().removeClass("disabled")}}});return($(this))},disableContextMenu:function(){$(this).each(function(){$(this).addClass("disabled")});return($(this))},enableContextMenu:function(){$(this).each(function(){$(this).removeClass("disabled")});return($(this))},destroyContextMenu:function(){$(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")});return($(this))}})})(jQuery)};