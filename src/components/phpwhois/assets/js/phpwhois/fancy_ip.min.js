// Simple script to "fancify" any IP address on the page.
$(function(){var c={};function a(d,f){var e=d.html();d.attr("ip",f.ip).html('<img src="'+f.flag_sm+'" title="'+f.country_name+'" alt="'+f.country+'"/> '+e);d.append(c[f.query].tooltip)}function b(f){var e='<div class="ip-tooltip" style="display:none;"><span class="nowrap"><span class="ip-tooltip-label">Organization:</span>'+f.organization+'</span><br/><span class="ip-tooltip-label">Country:</span>'+f.country_name+'<br/><span class="ip-tooltip-label">IP:</span>'+f.ip+' <a class="ip-tooltip-ban-link" href="'+Core.ROOT_URL+"security/blacklistip/add?ip_addr="+f.ip+'/32" title="Ban IP"><i class="icon-thumbs-down"></i></a><br/><span class="ip-tooltip-label">Network:</span>'+f.network+' <a class="ip-tooltip-ban-link" href="'+Core.ROOT_URL+"security/blacklistip/add?ip_addr="+f.network+'" title="Ban Network"><i class="icon-thumbs-down"></i></a><br/></div>',d;c[f.query]["tooltip"]=e}$(".ip").each(function(){var d=Core.Strings.trim($(this).text());if(typeof c[d]!="undefined"){if(c[d].result){a($(this),c[d].result)}else{c[d].doms.push($(this))}}else{c[d]={doms:[$(this)],result:false,xhr:$.ajax({url:Core.ROOT_URL+"phpwhois/lookup.json?q="+d,dataType:"json",type:"get",success:function(f){var e;for(e in c[d]["doms"]){b(f);a(c[d]["doms"][e],f)}c[d].result=f}})}}}).hoverIntent({over:function(){$(this).find(".ip-tooltip").slideDown(100)},out:function(){$(this).find(".ip-tooltip").slideUp(100)},timeout:200})});