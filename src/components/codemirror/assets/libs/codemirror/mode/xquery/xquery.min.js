CodeMirror.defineMode("xquery",function(){var g=function(){function M(A){return{type:A,style:"keyword"}}var F=M("keyword a"),D=M("keyword b"),x=M("keyword c"),E=M("operator"),L={type:"atom",style:"atom"},w={type:"punctuation",style:null},N={type:"axis_specifier",style:"qualifier"};var z={"if":F,"switch":F,"while":F,"for":F,"else":D,then:D,"try":D,"finally":D,"catch":D,element:x,attribute:x,let:x,"implements":x,"import":x,module:x,namespace:x,"return":x,"super":x,"this":x,"throws":x,where:x,"private":x,",":w,"null":L,"fn:false()":L,"fn:true()":L};var H=["after","ancestor","ancestor-or-self","and","as","ascending","assert","attribute","before","by","case","cast","child","comment","declare","default","define","descendant","descendant-or-self","descending","document","document-node","element","else","eq","every","except","external","following","following-sibling","follows","for","function","if","import","in","instance","intersect","item","let","module","namespace","node","node","of","only","or","order","parent","precedes","preceding","preceding-sibling","processing-instruction","ref","return","returns","satisfies","schema","schema-element","self","some","sortby","stable","text","then","to","treat","typeswitch","union","variable","version","where","xquery","empty-sequence"];for(var J=0,G=H.length;J<G;J++){z[H[J]]=M(H[J])}var K=["xs:string","xs:float","xs:decimal","xs:double","xs:integer","xs:boolean","xs:date","xs:dateTime","xs:time","xs:duration","xs:dayTimeDuration","xs:time","xs:yearMonthDuration","numeric","xs:hexBinary","xs:base64Binary","xs:anyURI","xs:QName","xs:byte","xs:boolean","xs:anyURI","xf:yearMonthDuration"];for(var J=0,G=K.length;J<G;J++){z[K[J]]=L}var I=["eq","ne","lt","le","gt","ge",":=","=",">",">=","<","<=",".","|","?","and","or","div","idiv","mod","*","/","+","-"];for(var J=0,G=I.length;J<G;J++){z[I[J]]=E}var y=["self::","attribute::","child::","descendant::","descendant-or-self::","parent::","ancestor::","ancestor-or-self::","following::","preceding::","following-sibling::","preceding-sibling::"];for(var J=0,G=y.length;J<G;J++){z[y[J]]=N}return z}();var d,n;function u(y,x,w){d=y;n=w;return x}function l(y,x,w){x.tokenize=w;return w(y,x)}function v(D,y){var w=D.next(),F=false,G=o(D);if(w=="<"){if(D.match("!--",true)){return l(D,y,a)}if(D.match("![CDATA",false)){y.tokenize=f;return u("tag","tag")}if(D.match("?",false)){return l(D,y,c)}var z=D.eat("/");D.eatSpace();var A="",C;while((C=D.eat(/[^\s\u00a0=<>\"\'\/?]/))){A+=C}return l(D,y,r(A,z))}else{if(w=="{"){q(y,{type:"codeblock"});return u("",null)}else{if(w=="}"){h(y);return u("",null)}else{if(b(y)){if(w==">"){return u("tag","tag")}else{if(w=="/"&&D.eat(">")){h(y);return u("tag","tag")}else{return u("word","variable")}}}else{if(/\d/.test(w)){D.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/);return u("number","atom")}else{if(w==="("&&D.eat(":")){q(y,{type:"comment"});return l(D,y,k)}else{if(!G&&(w==='"'||w==="'")){return l(D,y,e(w))}else{if(w==="$"){return l(D,y,m)}else{if(w===":"&&D.eat("=")){return u("operator","keyword")}else{if(w==="("){q(y,{type:"paren"});return u("",null)}else{if(w===")"){h(y);return u("",null)}else{if(w==="["){q(y,{type:"bracket"});return u("",null)}else{if(w==="]"){h(y);return u("",null)}else{var E=g.propertyIsEnumerable(w)&&g[w];if(G&&w==='"'){while(D.next()!=='"'){}}if(G&&w==="'"){while(D.next()!=="'"){}}if(!E){D.eatWhile(/[\w\$_-]/)}var B=D.eat(":");if(!D.eat(":")&&B){D.eatWhile(/[\w\$_-]/)}if(D.match(/^[ \t]*\(/,false)){F=true}var x=D.current();E=g.propertyIsEnumerable(x)&&g[x];if(F&&!E){E={type:"function_call",style:"variable def"}}if(t(y)){h(y);return u("word","variable",x)}if(x=="element"||x=="attribute"||E.type=="axis_specifier"){q(y,{type:"xmlconstructor"})}return E?u(E.type,E.style,x):u("word","variable",x)}}}}}}}}}}}}}}function k(B,z){var x=false,w=false,A=0,y;while(y=B.next()){if(y==")"&&x){if(A>0){A--}else{h(z);break}}else{if(y==":"&&w){A++}}x=(y==":");w=(y=="(")}return u("comment","comment")}function e(w,x){return function(A,z){var y;if(j(z)&&A.current()==w){h(z);if(x){z.tokenize=x}return u("string","string")}q(z,{type:"string",name:w,tokenize:e(w,x)});if(A.match("{",false)&&i(z)){z.tokenize=v;return u("string","string")}while(y=A.next()){if(y==w){h(z);if(x){z.tokenize=x}break}else{if(A.match("{",false)&&i(z)){z.tokenize=v;return u("string","string")}}}return u("string","string")}}function m(y,w){var x=/[\w\$_-]/;if(y.eat('"')){while(y.next()!=='"'){}y.eat(":")}else{y.eatWhile(x);if(!y.match(":=",false)){y.eat(":")}}y.eatWhile(x);w.tokenize=v;return u("variable","variable")}function r(w,x){return function(z,y){z.eatSpace();if(x&&z.eat(">")){h(y);y.tokenize=v;return u("tag","tag")}if(!z.eat("/")){q(y,{type:"tag",name:w,tokenize:v})}if(!z.eat(">")){y.tokenize=s;return u("tag","tag")}else{y.tokenize=v}return u("tag","tag")}}function s(y,x){var w=y.next();if(w=="/"&&y.eat(">")){if(i(x)){h(x)}if(b(x)){h(x)}return u("tag","tag")}if(w==">"){if(i(x)){h(x)}return u("tag","tag")}if(w=="="){return u("",null)}if(w=='"'||w=="'"){return l(y,x,e(w,s))}if(!i(x)){q(x,{type:"attribute",name:name,tokenize:s})}y.eat(/[a-zA-Z_:]/);y.eatWhile(/[-a-zA-Z0-9_:.]/);y.eatSpace();if(y.match(">",false)||y.match("/",false)){h(x);x.tokenize=v}return u("attribute","attribute")}function a(y,x){var w;while(w=y.next()){if(w=="-"&&y.match("->",true)){x.tokenize=v;return u("comment","comment")}}}function f(y,x){var w;while(w=y.next()){if(w=="]"&&y.match("]",true)){x.tokenize=v;return u("comment","comment")}}}function c(y,x){var w;while(w=y.next()){if(w=="?"&&y.match(">",true)){x.tokenize=v;return u("comment","comment meta")}}}function b(w){return p(w,"tag")}function i(w){return p(w,"attribute")}function t(w){return p(w,"xmlconstructor")}function j(w){return p(w,"string")}function o(w){if(w.current()==='"'){return w.match(/^[^\"]+\"\:/,false)}else{if(w.current()==="'"){return w.match(/^[^\"]+\'\:/,false)}else{return false}}}function p(x,w){return(x.stack.length&&x.stack[x.stack.length-1].type==w)}function q(w,x){w.stack.push(x)}function h(w){w.stack.pop();var x=w.stack.length&&w.stack[w.stack.length-1].tokenize;w.tokenize=x||v}return{startState:function(){return{tokenize:v,cc:[],stack:[]}},token:function(y,x){if(y.eatSpace()){return null}var w=x.tokenize(y,x);return w}}});CodeMirror.defineMIME("application/xquery","xquery");