CodeMirror.defineMode("tiddlywiki",function(){var t={};var i=function(){function A(B){return{type:B,style:"macro"}}return{allTags:A("allTags"),closeAll:A("closeAll"),list:A("list"),newJournal:A("newJournal"),newTiddler:A("newTiddler"),permaview:A("permaview"),saveChanges:A("saveChanges"),search:A("search"),slider:A("slider"),tabs:A("tabs"),tag:A("tag"),tagging:A("tagging"),tags:A("tags"),tiddler:A("tiddler"),timeline:A("timeline"),today:A("today"),version:A("version"),option:A("option"),"with":A("with"),filter:A("filter")}}();var v=/[\w_\-]/i,n=/^\-\-\-\-+$/,g=/^\/\*\*\*$/,a=/^\*\*\*\/$/,q=/^<<<$/,f=/^\/\/\{\{\{$/,s=/^\/\/\}\}\}$/,l=/^<!--\{\{\{-->$/,z=/^<!--\}\}\}-->$/,u=/^\{\{\{$/,j=/^\}\}\}$/,d=/.*?\}\}\}/;function o(C,B,A){B.tokenize=A;return A(C,B)}var e,p;function x(C,B,A){e=C;p=A;return B}function m(F,D){var B=F.sol(),A;D.block=false;A=F.peek();if(B&&/[<\/\*{}\-]/.test(A)){if(F.match(u)){D.block=true;return o(F,D,r)}if(F.match(q)){return x("quote","quote")}if(F.match(g)||F.match(a)){return x("code","comment")}if(F.match(f)||F.match(s)||F.match(l)||F.match(z)){return x("code","comment")}if(F.match(n)){return x("hr","hr")}}A=F.next();if(B&&/[\/\*!#;:>|]/.test(A)){if(A=="!"){F.skipToEnd();return x("header","header")}if(A=="*"){F.eatWhile("*");return x("list","comment")}if(A=="#"){F.eatWhile("#");return x("list","comment")}if(A==";"){F.eatWhile(";");return x("list","comment")}if(A==":"){F.eatWhile(":");return x("list","comment")}if(A==">"){F.eatWhile(">");return x("quote","quote")}if(A=="|"){return x("table","header")}}if(A=="{"&&F.match(/\{\{/)){return o(F,D,r)}if(/[hf]/i.test(A)){if(/[ti]/i.test(F.peek())&&F.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i)){return x("link","link")}}if(A=='"'){return x("string","string")}if(A=="~"){return x("text","brace")}if(/[\[\]]/.test(A)){if(F.peek()==A){F.next();return x("brace","brace")}}if(A=="@"){F.eatWhile(v);return x("link","link")}if(/\d/.test(A)){F.eatWhile(/\d/);return x("number","number")}if(A=="/"){if(F.eat("%")){return o(F,D,b)}else{if(F.eat("/")){return o(F,D,w)}}}if(A=="_"){if(F.eat("_")){return o(F,D,c)}}if(A=="-"){if(F.eat("-")){if(F.peek()!=" "){return o(F,D,y)}if(F.peek()==" "){return x("text","brace")}}}if(A=="'"){if(F.eat("'")){return o(F,D,h)}}if(A=="<"){if(F.eat("<")){return o(F,D,k)}}else{return x(A)}F.eatWhile(/[\w\$_]/);var E=F.current(),C=t.propertyIsEnumerable(E)&&t[E];return C?x(C.type,C.style,E):x("text",null,E)}function b(D,C){var A=false,B;while(B=D.next()){if(B=="/"&&A){C.tokenize=m;break}A=(B=="%")}return x("comment","comment")}function h(D,C){var A=false,B;while(B=D.next()){if(B=="'"&&A){C.tokenize=m;break}A=(B=="'")}return x("text","strong")}function r(C,B){var A,D=B.block;if(D&&C.current()){return x("code","comment")}if(!D&&C.match(d)){B.tokenize=m;return x("code","comment")}if(D&&C.sol()&&C.match(j)){B.tokenize=m;return x("code","comment")}A=C.next();return(D)?x("code","comment"):x("code","comment")}function w(D,C){var A=false,B;while(B=D.next()){if(B=="/"&&A){C.tokenize=m;break}A=(B=="/")}return x("text","em")}function c(D,C){var A=false,B;while(B=D.next()){if(B=="_"&&A){C.tokenize=m;break}A=(B=="_")}return x("text","underlined")}function y(D,C){var A=false,B;while(B=D.next()){if(B=="-"&&A){C.tokenize=m;break}A=(B=="-")}return x("text","strikethrough")}function k(E,C){var A,D,B;if(E.current()=="<<"){return x("brace","macro")}A=E.next();if(!A){C.tokenize=m;return x(A)}if(A==">"){if(E.peek()==">"){E.next();C.tokenize=m;return x("brace","macro")}}E.eatWhile(/[\w\$_]/);D=E.current();B=i.propertyIsEnumerable(D)&&i[D];if(B){return x(B.type,B.style,D)}else{return x("macro",null,D)}}return{startState:function(){return{tokenize:m,indented:0,level:0}},token:function(C,B){if(C.eatSpace()){return null}var A=B.tokenize(C,B);return A},electricChars:""}});CodeMirror.defineMIME("text/x-tiddlywiki","tiddlywiki");