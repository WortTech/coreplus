CodeMirror.defineMode("rst-base",function(M){function B(ab){var aa=Array.prototype.slice.call(arguments,1);return ab.replace(/{(\d+)}/g,function(ac,ad){return typeof aa[ad]!="undefined"?aa[ad]:ac})}function c(aa){this.message=aa}c.prototype.toString=function(){return"AssertException: "+this.message};function L(ab,aa){if(!ab){throw new c(aa)}return ab}var n=CodeMirror.getMode(M,"python");var b=CodeMirror.getMode(M,"stex");var o="\\s+";var p="(?:\\s*|\\W|$)",w=new RegExp(B("^{0}",p));var I="(?:[^\\W\\d_](?:[\\w\\+\\.\\-:]*[^\\W_])?)",S=new RegExp(B("^{0}",I));var R="(?:[^\\W\\d_](?:[\\w\\s\\+\\.\\-:]*[^\\W_])?)";var s=B("(?:{0}|`{1}`)",I,R);var i="(?:[^\\s\\|](?:[^\\|]*[^\\s\\|])?)";var g="(?:[^\\`]+)",u=new RegExp(B("^{0}",g));var H=new RegExp("^([!'#$%&\"()*+,-./:;<=>?@\\[\\\\\\]^_`{|}~])\\1{3,}\\s*$");var Q=new RegExp(B("^\\.\\.{0}",o));var r=new RegExp(B("^_{0}:{1}|^__:{1}",s,p));var E=new RegExp(B("^{0}::{1}",s,p));var v=new RegExp(B("^\\|{0}\\|{1}{2}::{3}",i,o,s,p));var q=new RegExp(B("^\\[(?:\\d+|#{0}?|\\*)]{1}",s,p));var D=new RegExp(B("^\\[{0}\\]{1}",s,p));var X=new RegExp(B("^\\|{0}\\|",i));var G=new RegExp(B("^\\[(?:\\d+|#{0}?|\\*)]_",s));var N=new RegExp(B("^\\[{0}\\]_",s));var C=new RegExp(B("^{0}__?",s));var A=new RegExp(B("^`{0}`_",g));var k=new RegExp(B("^:{0}:`{1}`{2}",I,g,p));var V=new RegExp(B("^`{1}`:{0}:{2}",I,g,p));var T=new RegExp(B("^:{0}:{1}",I,p));var m=new RegExp(B("^{0}",s));var Y=new RegExp(B("^::{0}",p));var f=new RegExp(B("^\\|{0}\\|",i));var z=new RegExp(B("^{0}",o));var U=new RegExp(B("^{0}",s));var F=new RegExp(B("^::{0}",p));var y=new RegExp("^_");var x=new RegExp(B("^{0}|_",s));var l=new RegExp(B("^:{0}",p));var K=new RegExp("^::\\s*$");var W=new RegExp("^\\s+(?:>>>|In \\[\\d+\\]:)\\s");function e(ac,ab){var aa=null;if(ac.sol()&&ac.match(W,false)){a(ab,O,{mode:n,local:n.startState()})}else{if(ac.sol()&&ac.match(Q)){a(ab,P);aa="meta"}else{if(ac.sol()&&ac.match(H)){a(ab,e);aa="header"}else{if(h(ab)==k||ac.match(k,false)){switch(j(ab)){case 0:a(ab,e,Z(k,1));L(ac.match(/^:/));aa="meta";break;case 1:a(ab,e,Z(k,2));L(ac.match(S));aa="keyword";if(ac.current().match(/^(?:math|latex)/)){ab.tmp={mode:b,local:b.startState()}}break;case 2:a(ab,e,Z(k,3));L(ac.match(/^:`/));aa="meta";break;case 3:if(ab.tmp){if(ac.peek()=="`"){a(ab,e,Z(k,4));ab.tmp=undefined;break}aa=ab.tmp.mode.token(ac,ab.tmp.local);break}a(ab,e,Z(k,4));L(ac.match(u));aa="string";break;case 4:a(ab,e,Z(k,5));L(ac.match(/^`/));aa="meta";break;case 5:a(ab,e,Z(k,6));L(ac.match(w));break;default:a(ab,e);L(ac.current()=="")}}else{if(h(ab)==V||ac.match(V,false)){switch(j(ab)){case 0:a(ab,e,Z(V,1));L(ac.match(/^`/));aa="meta";break;case 1:a(ab,e,Z(V,2));L(ac.match(u));aa="string";break;case 2:a(ab,e,Z(V,3));L(ac.match(/^`:/));aa="meta";break;case 3:a(ab,e,Z(V,4));L(ac.match(S));aa="keyword";break;case 4:a(ab,e,Z(V,5));L(ac.match(/^:/));aa="meta";break;case 5:a(ab,e,Z(V,6));L(ac.match(w));break;default:a(ab,e);L(ac.current()=="")}}else{if(h(ab)==T||ac.match(T,false)){switch(j(ab)){case 0:a(ab,e,Z(T,1));L(ac.match(/^:/));aa="meta";break;case 1:a(ab,e,Z(T,2));L(ac.match(S));aa="keyword";break;case 2:a(ab,e,Z(T,3));L(ac.match(/^:/));aa="meta";break;case 3:a(ab,e,Z(T,4));L(ac.match(w));break;default:a(ab,e);L(ac.current()=="")}}else{if(h(ab)==X||ac.match(X,false)){switch(j(ab)){case 0:a(ab,e,Z(X,1));L(ac.match(f));aa="variable-2";break;case 1:a(ab,e,Z(X,2));if(ac.match(/^_?_?/)){aa="link"}break;default:a(ab,e);L(ac.current()=="")}}else{if(ac.match(G)){a(ab,e);aa="quote"}else{if(ac.match(N)){a(ab,e);aa="quote"}else{if(ac.match(C)){a(ab,e);if(!ac.peek()||ac.peek().match(/^\W$/)){aa="link"}}else{if(h(ab)==A||ac.match(A,false)){switch(j(ab)){case 0:if(!ac.peek()||ac.peek().match(/^\W$/)){a(ab,e,Z(A,1))}else{ac.match(A)}break;case 1:a(ab,e,Z(A,2));L(ac.match(/^`/));aa="link";break;case 2:a(ab,e,Z(A,3));L(ac.match(u));break;case 3:a(ab,e,Z(A,4));L(ac.match(/^`_/));aa="link";break;default:a(ab,e);L(ac.current()=="")}}else{if(ac.match(K)){a(ab,J)}else{if(ac.next()){a(ab,e)}}}}}}}}}}}}}return aa}function P(ac,ab){var aa=null;if(h(ab)==v||ac.match(v,false)){switch(j(ab)){case 0:a(ab,P,Z(v,1));L(ac.match(f));aa="variable-2";break;case 1:a(ab,P,Z(v,2));L(ac.match(z));break;case 2:a(ab,P,Z(v,3));L(ac.match(U));aa="keyword";break;case 3:a(ab,P,Z(v,4));L(ac.match(F));aa="meta";break;default:a(ab,e);L(ac.current()=="")}}else{if(h(ab)==E||ac.match(E,false)){switch(j(ab)){case 0:a(ab,P,Z(E,1));L(ac.match(m));aa="keyword";if(ac.current().match(/^(?:math|latex)/)){ab.tmp_stex=true}else{if(ac.current().match(/^python/)){ab.tmp_py=true}}break;case 1:a(ab,P,Z(E,2));L(ac.match(Y));aa="meta";break;default:if(ac.match(/^latex\s*$/)||ab.tmp_stex){ab.tmp_stex=undefined;a(ab,O,{mode:b,local:b.startState()})}else{if(ac.match(/^python\s*$/)||ab.tmp_py){ab.tmp_py=undefined;a(ab,O,{mode:n,local:n.startState()})}else{a(ab,e);L(ac.current()=="")}}}}else{if(h(ab)==r||ac.match(r,false)){switch(j(ab)){case 0:a(ab,P,Z(r,1));L(ac.match(y));L(ac.match(x));aa="link";break;case 1:a(ab,P,Z(r,2));L(ac.match(l));aa="meta";break;default:a(ab,e);L(ac.current()=="")}}else{if(ac.match(q)){a(ab,e);aa="quote"}else{if(ac.match(D)){a(ab,e);aa="quote"}else{ac.eatSpace();if(ac.eol()){a(ab,e)}else{ac.skipToEnd();a(ab,t);aa="comment"}}}}}}return aa}function t(ab,aa){return d(ab,aa,"comment")}function J(ab,aa){return d(ab,aa,"meta")}function d(ac,ab,aa){if(ac.eol()||ac.eatSpace()){ac.skipToEnd();return aa}else{a(ab,e);return null}}function O(ac,ab){if(ab.ctx.mode&&ab.ctx.local){if(ac.sol()){if(!ac.eatSpace()){a(ab,e)}return null}try{return ab.ctx.mode.token(ac,ab.ctx.local)}catch(aa){a(ab,e);return null}}a(ab,e);return null}function Z(aa,ab,ad,ac){return{phase:aa,stage:ab,mode:ad,local:ac}}function a(ac,ab,aa){ac.tok=ab;ac.ctx=aa||{}}function j(aa){return aa.ctx.stage||0}function h(aa){return aa.ctx.phase}return{startState:function(){return{tok:e,ctx:Z(undefined,0)}},copyState:function(aa){return{tok:aa.tok,ctx:aa.ctx}},innerMode:function(aa){return{state:aa.ctx.local,mode:aa.ctx.mode}},token:function(ab,aa){return aa.tok(ab,aa)}}},"python","stex");CodeMirror.defineMode("rst",function(d,n){var e="[Hh][Tt][Tt][Pp][Ss]?://";var f="(?:[\\d\\w.-]+)\\.(?:\\w{2,6})";var i="(?:/[\\d\\w\\#\\%\\&\\-\\.\\,\\/\\:\\=\\?\\~]+)*";var l=new RegExp("^"+e+f+i);var c=/^\*\*[^\*\s](?:[^\*]*[^\*\s])?\*\*(\s+|$)/;var b=/^[^\*]\*[^\*\s](?:[^\*]*[^\*\s])?\*(\s+|$)/;var g=/^``[^`\s](?:[^`]*[^`\s])``(\s+|$)/;var k=/^(?:[\d]+(?:[\.,]\d+)*)/;var a=/^(?:\s\+[\d]+(?:[\.,]\d+)*)/;var m=/^(?:\s\-[\d]+(?:[\.,]\d+)*)/;var h={token:function(o){if(o.match(l)){return"link"}if(o.match(c)){return"strong"}if(o.match(b)){return"em"}if(o.match(g)){return"string-2"}if(o.match(k)){return"number"}if(o.match(a)){return"positive"}if(o.match(m)){return"negative"}while(o.next()!=null){if(o.match(l,false)){break}if(o.match(c,false)){break}if(o.match(b,false)){break}if(o.match(g,false)){break}if(o.match(k,false)){break}if(o.match(a,false)){break}if(o.match(m,false)){break}}return null}};var j=CodeMirror.getMode(d,n.backdrop||"rst-base");return CodeMirror.overlayMode(j,h,true)},"python","stex");CodeMirror.defineMIME("text/x-rst","rst");