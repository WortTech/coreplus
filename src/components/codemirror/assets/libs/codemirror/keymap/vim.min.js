// Supported keybindings:
(function(){var a=[{keys:["Left"],type:"keyToKey",toKeys:["h"]},{keys:["Right"],type:"keyToKey",toKeys:["l"]},{keys:["Up"],type:"keyToKey",toKeys:["k"]},{keys:["Down"],type:"keyToKey",toKeys:["j"]},{keys:["Space"],type:"keyToKey",toKeys:["l"]},{keys:["Backspace"],type:"keyToKey",toKeys:["h"]},{keys:["Ctrl-Space"],type:"keyToKey",toKeys:["W"]},{keys:["Ctrl-Backspace"],type:"keyToKey",toKeys:["B"]},{keys:["Shift-Space"],type:"keyToKey",toKeys:["w"]},{keys:["Shift-Backspace"],type:"keyToKey",toKeys:["b"]},{keys:["Ctrl-n"],type:"keyToKey",toKeys:["j"]},{keys:["Ctrl-p"],type:"keyToKey",toKeys:["k"]},{keys:["Ctrl-["],type:"keyToKey",toKeys:["Esc"]},{keys:["Ctrl-c"],type:"keyToKey",toKeys:["Esc"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"]},{keys:["S"],type:"keyToKey",toKeys:["c","c"]},{keys:["Home"],type:"keyToKey",toKeys:["0"]},{keys:["End"],type:"keyToKey",toKeys:["$"]},{keys:["PageUp"],type:"keyToKey",toKeys:["Ctrl-b"]},{keys:["PageDown"],type:"keyToKey",toKeys:["Ctrl-f"]},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:true}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:true}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:true}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:false}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,linewise:true}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,linewise:true}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:true}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:false}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:false,bigWord:true}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,inclusive:true}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:true,wordEnd:true,bigWord:true,inclusive:true}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:false,bigWord:true}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,inclusive:true}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:false,wordEnd:true,bigWord:true,inclusive:true}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:false}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:true}},{keys:["Ctrl-f"],type:"motion",motion:"moveByPage",motionArgs:{forward:true}},{keys:["Ctrl-b"],type:"motion",motion:"moveByPage",motionArgs:{forward:false}},{keys:["Ctrl-d"],type:"motion",motion:"moveByScroll",motionArgs:{forward:true,explicitRepeat:true}},{keys:["Ctrl-u"],type:"motion",motion:"moveByScroll",motionArgs:{forward:false,explicitRepeat:true}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:true,explicitRepeat:true,linewise:true}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:false,toFirstChar:true}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:true,toFirstChar:true,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:true}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:true}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:false}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:true,inclusive:true}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:false}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:true}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:false}},{keys:["'","character"],type:"motion",motion:"goToMark"},{keys:["`","character"],type:"motion",motion:"goToMark"},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:true,linewise:true}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:false,linewise:true}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:true}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:false}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change",operatorArgs:{enterInsertMode:true}},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:true}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:false}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:true}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:false}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:true},operatorMotionArgs:{visualLine:false}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:false},operatorMotionArgs:{visualLine:true}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["C"],type:"operatorMotion",operator:"change",operatorArgs:{enterInsertMode:true},motion:"moveToEol",motionArgs:{inclusive:true},operatorMotionArgs:{visualLine:true}},{keys:["~"],type:"operatorMotion",operator:"swapcase",motion:"moveByCharacters",motionArgs:{forward:true}},{keys:["a"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode"},{keys:["I"],type:"action",action:"enterInsertMode",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:true}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",actionArgs:{after:false}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:true}},{keys:["J"],type:"action",action:"joinLines"},{keys:["p"],type:"action",action:"paste",actionArgs:{after:true}},{keys:["P"],type:"action",action:"paste",actionArgs:{after:false}},{keys:["r","character"],type:"action",action:"replace"},{keys:["u"],type:"action",action:"undo"},{keys:["Ctrl-r"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","Enter"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["Ctrl-a"],type:"action",action:"incrementNumberToken",actionArgs:{increase:true,backtrack:false}},{keys:["Ctrl-x"],type:"action",action:"incrementNumberToken",actionArgs:{increase:false,backtrack:false}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:true}},{keys:["/"],type:"search",searchArgs:{forward:true,querySrc:"prompt"}},{keys:["?"],type:"search",searchArgs:{forward:false,querySrc:"prompt"}},{keys:["*"],type:"search",searchArgs:{forward:true,querySrc:"wordUnderCursor"}},{keys:["#"],type:"search",searchArgs:{forward:false,querySrc:"wordUnderCursor"}},{keys:[":"],type:"ex"}];var c=function(){var E=/[A-Za-z]/;var at=/[\d]/;var p=/\s/;var U=[(/\w/),(/[^\w\s]/)],aJ=[(/\S/)];function T(aY,aW){var aX=[];for(var aV=aY;aV<aY+aW;aV++){aX.push(String.fromCharCode(aV))}return aX}var M=T(65,26);var S=T(97,26);var D=T(48,10);var f="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'";var i=f.split("");var aq=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"];var ad=M.concat(S).concat(D).concat(["<",">"]);var k=M.concat(S).concat(D).concat('-"'.split(""));function ay(aV){return E.test(aV)}function d(aV,aW){return aW>=aV.firstLine()&&aW<=aV.lastLine()}function w(aV){return(/^[a-z]$/).test(aV)}function z(aV){return"()[]{}".indexOf(aV)!=-1}function L(aV){return at.test(aV)}function s(aV){return(/^[A-Z]$/).test(aV)}function aM(aV){return(/^[\w]$/).test(aV)}function aL(aV){return p.test(aV)}function B(aV){return(/^\s*$/).test(aV)}function G(aV,aX,aW){return aV>=aX&&aV<=aW}function x(aX,aV){for(var aW=0;aW<aV.length;aW++){if(aV[aW]==aX){return true}}return false}var q;function o(){if(!q){q={searchQuery:null,searchIsReversed:false,lastChararacterSearch:{increment:0,forward:true,selectedCharacter:""},registerController:new N({})}}return q}function aC(aV){if(!aV.vimState){aV.vimState={inputState:new Y(),lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},visualMode:false,visualLine:false}}return aV.vimState}var ak={buildKeyMap:function(){},getRegisterController:function(){return o().registerController},clearVimGlobalState_:function(){q=null},map:function(aV,aW){l.map(aV,aW)},defineEx:function(aV,aX,aW){if(aV.indexOf(aX)===0){az[aV]=aW;l.commandMap_[aX]={name:aV,shortName:aX,type:"api"}}else{throw new Error('(Vim.defineEx) "'+aX+'" is not a prefix of "'+aV+'", command not registered')}},maybeInitState:function(aV){aC(aV)},handleKey:function(aV,aY){var aZ;var aW=aC(aV);if(aY=="Esc"){aW.inputState=new Y();if(aW.visualMode){an(aV,aW)}return}if(aW.visualMode&&aT(aV.getCursor("head"),aV.getCursor("anchor"))){an(aV,aW)}if(!aW.visualMode&&!aT(aV.getCursor("head"),aV.getCursor("anchor"))){aW.visualMode=true;aW.visualLine=false}if(aY!="0"||(aY=="0"&&aW.inputState.getRepeat()===0)){aZ=aB.matchCommand(aY,a,aW)}if(!aZ){if(L(aY)){aW.inputState.pushRepeatDigit(aY)}return}if(aZ.type=="keyToKey"){for(var aX=0;aX<aZ.toKeys.length;aX++){this.handleKey(aV,aZ.toKeys[aX])}}else{aB.processCommand(aV,aW,aZ)}}};function Y(){this.prefixRepeat=[];this.motionRepeat=[];this.operator=null;this.operatorArgs=null;this.motion=null;this.motionArgs=null;this.keyBuffer=[];this.registerName=null}Y.prototype.pushRepeatDigit=function(aV){if(!this.operator){this.prefixRepeat=this.prefixRepeat.concat(aV)}else{this.motionRepeat=this.motionRepeat.concat(aV)}};Y.prototype.getRepeat=function(){var aV=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0){aV=1;if(this.prefixRepeat.length>0){aV*=parseInt(this.prefixRepeat.join(""),10)}if(this.motionRepeat.length>0){aV*=parseInt(this.motionRepeat.join(""),10)}}return aV};function aK(aW,aV){this.clear();if(aW){this.set(aW,aV)}}aK.prototype={set:function(aW,aV){this.text=aW;this.linewise=!!aV},append:function(aW,aV){if(aV||this.linewise){this.text+="\n"+aW;this.linewise=true}else{this.text+=aW}},clear:function(){this.text="";this.linewise=false},toString:function(){return this.text}};function N(aV){this.registers=aV;this.unamedRegister=aV['"']=new aK()}N.prototype={pushText:function(aY,aW,a0,aZ){var aX=this.isValidRegister(aY)?this.getRegister(aY):null;if(!aX){switch(aW){case"yank":this.registers["0"]=new aK(a0,aZ);break;case"delete":case"change":if(a0.indexOf("\n")==-1){this.registers["-"]=new aK(a0,aZ)}else{this.shiftNumericRegisters_();this.registers["1"]=new aK(a0,aZ)}break}this.unamedRegister.set(a0,aZ);return}var aV=s(aY);if(aV){aX.append(a0,aZ);this.unamedRegister.append(a0,aZ)}else{aX.set(a0,aZ);this.unamedRegister.set(a0,aZ)}},getRegister:function(aV){if(!this.isValidRegister(aV)){return this.unamedRegister}aV=aV.toLowerCase();if(!this.registers[aV]){this.registers[aV]=new aK()}return this.registers[aV]},isValidRegister:function(aV){return aV&&x(aV,k)},shiftNumericRegisters_:function(){for(var aV=9;aV>=2;aV--){this.registers[aV]=this.getRegister(""+(aV-1))}}};var aB={matchCommand:function(aY,a1,aW){var aV=aW.inputState;var aZ=aV.keyBuffer.concat(aY);for(var aX=0;aX<a1.length;aX++){var a0=a1[aX];if(aI(aZ,a0.keys)){if(aZ.length<a0.keys.length){aV.keyBuffer.push(aY);return null}else{if(aV.operator&&a0.type=="action"){continue}if(a0.keys[aZ.length-1]=="character"){aV.selectedCharacter=aZ[aZ.length-1];if(aV.selectedCharacter.length>1){switch(aV.selectedCharacter){case"Enter":aV.selectedCharacter="\n";break;case"Space":aV.selectedCharacter=" ";break;default:continue}}}aV.keyBuffer=[];return a0}}}aV.keyBuffer=[];return null},processCommand:function(aV,aW,aX){aW.inputState.repeatOverride=aX.repeatOverride;switch(aX.type){case"motion":this.processMotion(aV,aW,aX);break;case"operator":this.processOperator(aV,aW,aX);break;case"operatorMotion":this.processOperatorMotion(aV,aW,aX);break;case"action":this.processAction(aV,aW,aX);break;case"search":this.processSearch(aV,aW,aX);break;case"ex":case"keyToEx":this.processEx(aV,aW,aX);break;default:break}},processMotion:function(aV,aW,aX){aW.inputState.motion=aX.motion;aW.inputState.motionArgs=aG(aX.motionArgs);this.evalInput(aV,aW)},processOperator:function(aW,aX,aY){var aV=aX.inputState;if(aV.operator){if(aV.operator==aY.operator){aV.motion="expandToLine";aV.motionArgs={linewise:true};this.evalInput(aW,aX);return}else{aX.inputState=new Y()}}aV.operator=aY.operator;aV.operatorArgs=aG(aY.operatorArgs);if(aX.visualMode){this.evalInput(aW,aX)}},processOperatorMotion:function(aV,aY,aZ){var aX=aY.visualMode;var aW=aG(aZ.operatorMotionArgs);if(aW){if(aX&&aW.visualLine){aY.visualLine=true}}this.processOperator(aV,aY,aZ);if(!aX){this.processMotion(aV,aY,aZ)}},processAction:function(aW,aY,a1){var aV=aY.inputState;var a0=aV.getRepeat();var aZ=!!a0;var aX=aG(a1.actionArgs)||{};if(aV.selectedCharacter){aX.selectedCharacter=aV.selectedCharacter}if(a1.operator){this.processOperator(aW,aY,a1)}if(a1.motion){this.processMotion(aW,aY,a1)}if(a1.motion||a1.operator){this.evalInput(aW,aY)}aX.repeat=a0||1;aX.repeatIsExplicit=aZ;aX.registerName=aV.registerName;aY.inputState=new Y();aY.lastMotion=null,n[a1.action](aW,aX,aY)},processSearch:function(a8,a2,a1){if(!a8.getSearchCursor){return}var a3=a1.searchArgs.forward;af(a8).setReversed(!a3);var a4=(a3)?"/":"?";var a6=af(a8).getQuery();var aX=a8.getScrollInfo();function a0(bb,a9,ba){try{aS(a8,bb,a9,ba)}catch(bc){aH(a8,"Invalid regex: "+regexPart);return}aB.processMotion(a8,a2,{type:"motion",motion:"findNext",motionArgs:{forward:true}})}function a7(a9){a8.scrollTo(aX.left,aX.top);a0(a9,true,true)}function aZ(bb,ba){var a9;try{a9=aS(a8,ba,true,true)}catch(bb){}if(a9){a8.scrollIntoView(aU(a8,!a3,a9),30)}else{ah(a8);a8.scrollTo(aX.left,aX.top)}}function aW(bb,ba,bc){var a9=CodeMirror.keyName(bb);if(a9=="Esc"||a9=="Ctrl-C"||a9=="Ctrl-["){aS(a8,a6);ah(a8);a8.scrollTo(aX.left,aX.top);CodeMirror.e_stop(bb);bc();a8.focus()}}switch(a1.searchArgs.querySrc){case"prompt":aw(a8,{onClose:a7,prefix:a4,desc:A,onKeyUp:aZ,onKeyDown:aW});break;case"wordUnderCursor":var aY=ac(a8,false,true,false,true);var aV=true;if(!aY){aY=ac(a8,false,true,false,false);aV=false}if(!aY){return}var a5=a8.getLine(aY.start.line).substring(aY.start.ch,aY.end.ch+1);if(aV){a5="\\b"+a5+"\\b"}else{a5=g(a5)}a8.setCursor(aY.start);a0(a5,true,false);break}},processEx:function(aV,aW,aZ){function aY(a0){l.processCommand(aV,a0)}function aX(a2,a0,a3){var a1=CodeMirror.keyName(a2);if(a1=="Esc"||a1=="Ctrl-C"||a1=="Ctrl-["){CodeMirror.e_stop(a2);a3();aV.focus()}}if(aZ.type=="keyToEx"){l.processCommand(aV,aZ.exArgs.input)}else{if(aW.visualMode){aw(aV,{onClose:aY,prefix:":",value:"'<,'>",onKeyDown:aX})}else{aw(aV,{onClose:aY,prefix:":",onKeyDown:aX})}}},evalInput:function(aY,a9){var a2=a9.inputState;var a6=a2.motion;var a3=a2.motionArgs||{};var aZ=a2.operator;var bc=a2.operatorArgs||{};var a4=a2.registerName;var aV=aY.getCursor("head");var a7=aY.getCursor("anchor");var aX=u(aV);var a1=u(aX);var ba;var a0;if(aZ){this.recordLastEdit(aY,a9,a2)}if(a2.repeatOverride!==undefined){a0=a2.repeatOverride}else{a0=a2.getRepeat()}if(a0>0&&a3.explicitRepeat){a3.repeatIsExplicit=true}else{if(a3.noRepeat||(!a3.explicitRepeat&&a0===0)){a0=1;a3.repeatIsExplicit=false}}if(a2.selectedCharacter){a3.selectedCharacter=bc.selectedCharacter=a2.selectedCharacter}a3.repeat=a0;a9.inputState=new Y();if(a6){var a8=ax[a6](aY,a3,a9);a9.lastMotion=ax[a6];if(!a8){return}if(a8 instanceof Array){aX=a8[0];ba=a8[1]}else{ba=a8}if(!ba){ba={ch:aX.ch,line:aX.line}}if(a9.visualMode){if(aj(a7,aV)&&(aT(a7,ba)||aj(ba,a7))){a7.ch+=1}else{if(aj(aV,a7)&&(aT(a7,ba)||aj(a7,ba))){a7.ch-=1}}aV=ba;if(a9.visualLine){if(aj(a7,aV)){a7.ch=0;aV.ch=ar(aY,aV.line)}else{aV.ch=0;a7.ch=ar(aY,a7.line)}}aY.setSelection(a7,aV);am(aY,a9,"<",aj(a7,aV)?a7:aV);am(aY,a9,">",aj(a7,aV)?aV:a7)}else{if(!aZ){ba=H(aY,ba);aY.setCursor(ba.line,ba.ch)}}}if(aZ){var a5=false;a9.lastMotion=null;bc.repeat=a0;if(a9.visualMode){aX=a7;ba=aV;a3.inclusive=true}if(aj(ba,aX)){var bb=aX;aX=ba;ba=bb;a5=true}if(a3.inclusive&&!(a9.visualMode&&a5)){ba.ch++}var aW=a3.linewise||(a9.visualMode&&a9.visualLine);if(aW){aF(aY,aX,ba)}else{if(a3.forward){R(aY,aX,ba)}}bc.registerName=a4;bc.linewise=aW;y[aZ](aY,bc,a9,aX,ba,a1);if(a9.visualMode){an(aY,a9)}if(bc.enterInsertMode){n.enterInsertMode(aY)}}},recordLastEdit:function(aW,aX,aV){aX.lastEdit=aV}};var ax={moveToTopLine:function(aV,aX){var aW=aE(aV).top+aX.repeat-1;return{line:aW,ch:av(aV.getLine(aW))}},moveToMiddleLine:function(aV){var aX=aE(aV);var aW=Math.floor((aX.top+aX.bottom)*0.5);return{line:aW,ch:av(aV.getLine(aW))}},moveToBottomLine:function(aV,aX){var aW=aE(aV).bottom-aX.repeat+1;return{line:aW,ch:av(aV.getLine(aW))}},expandToLine:function(aV,aW){var aX=aV.getCursor();return{line:aX.line+aW.repeat-1,ch:Infinity}},findNext:function(aV,aX,aW){var a0=af(aV);var aZ=a0.getQuery();if(!aZ){return}var aY=!aX.forward;aY=(a0.isReversed())?!aY:aY;ag(aV,aZ);return aU(aV,aY,aZ,aX.repeat)},goToMark:function(aV,aX,aW){var aY=aW.marks[aX.selectedCharacter];if(aY){return aY.find()}return null},jumpToMark:function(a2,aY,aZ){var aX=a2.getCursor();for(var a0=0;a0<aY.repeat;a0++){var a4=aX;for(var a3 in aZ.marks){if(!w(a3)){continue}var aW=aZ.marks[a3].find();var aV=(aY.forward)?aj(aW,a4):aj(a4,aW);if(aV){continue}if(aY.linewise&&(aW.line==a4.line)){continue}var a1=aT(a4,aX);var a5=(aY.forward)?ap(a4,aW,aX):ap(aX,aW,a4);if(a1||a5){aX=aW}}}if(aY.linewise){aX.ch=av(a2.getLine(aX.line))}return aX},moveByCharacters:function(aV,aW){var aZ=aV.getCursor();var aY=aW.repeat;var aX=aW.forward?aZ.ch+aY:aZ.ch-aY;return{line:aZ.line,ch:aX}},moveByLines:function(aV,aY,aX){var a1=aV.getCursor();var aZ=a1.ch;switch(aX.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:aZ=aX.lastHPos;break;default:aX.lastHPos=aZ}var a0=aY.repeat+(aY.repeatOffset||0);var aW=aY.forward?a1.line+a0:a1.line-a0;if(aW<aV.firstLine()||aW>aV.lastLine()){return null}if(aY.toFirstChar){aZ=av(aV.getLine(aW));aX.lastHPos=aZ}aX.lastHSPos=aV.charCoords({line:aW,ch:aZ},"div").left;return{line:aW,ch:aZ}},moveByDisplayLines:function(a2,aX,aY){var a3=a2.getCursor();switch(aY.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:aY.lastHSPos=a2.charCoords(a3,"div").left}var aV=aX.repeat;var a1=a2.findPosV(a3,(aX.forward?aV:-aV),"line",aY.lastHSPos);if(a1.hitSide){if(aX.forward){var aW=a2.charCoords(a1,"div");var aZ={top:aW.top+8,left:aY.lastHSPos};var a1=a2.coordsChar(aZ,"div")}else{var a0=a2.charCoords({line:a2.firstLine(),ch:0},"div");a0.left=aY.lastHSPos;a1=a2.coordsChar(a0,"div")}}aY.lastHPos=a1.ch;return a1},moveByPage:function(aW,aX){var aV=aW.getCursor();var aZ=aX.repeat;aW.moveV((aX.forward?aZ:-aZ),"page");var aY=aW.getCursor();aW.setCursor(aV);return aY},moveByParagraph:function(aV,aX){var aW=aV.getCursor().line;var aZ=aX.repeat;var a0=aX.forward?1:-1;for(var aY=0;aY<aZ;aY++){if((!aX.forward&&aW===aV.firstLine())||(aX.forward&&aW==aV.lastLine())){break}aW+=a0;while(aW!==aV.firstLine()&&aW!=aV.lastLine()&&aV.getLine(aW)){aW+=a0}}return{line:aW,ch:0}},moveByScroll:function(a1,aW,aX){var aY=o();var a2=a1.getScrollInfo();var a3=null;var aV=aW.repeat;if(!aV){aV=a2.clientHeight/(2*a1.defaultTextHeight())}var a0=a1.charCoords(a1.getCursor(),"local");aW.repeat=aV;var a3=ax.moveByDisplayLines(a1,aW,aX);if(!a3){return null}var aZ=a1.charCoords(a3,"local");a1.scrollTo(null,a2.top+aZ.top-a0.top);return a3},moveByWords:function(aV,aW){return Z(aV,aW.repeat,!!aW.forward,!!aW.wordEnd,!!aW.bigWord)},moveTillCharacter:function(aW,aX){var aZ=aX.repeat;var aY=aN(aW,aZ,aX.forward,aX.selectedCharacter);var aV=aX.forward?-1:1;aa(aV,aX);if(!aY){return aW.getCursor()}aY.ch+=aV;return aY},moveToCharacter:function(aV,aW){var aX=aW.repeat;aa(0,aW);return aN(aV,aX,aW.forward,aW.selectedCharacter)||aV.getCursor()},moveToSymbol:function(aV,aW){var aX=aW.repeat;return aO(aV,aX,aW.forward,aW.selectedCharacter)||aV.getCursor()},moveToColumn:function(aV,aX,aW){var aY=aX.repeat;aW.lastHPos=aY-1;aW.lastHSPos=aV.charCoords(aV.getCursor(),"div").left;return P(aV,aY)},moveToEol:function(aV,aZ,aY){var a0=aV.getCursor();aY.lastHPos=Infinity;var aX={line:a0.line+aZ.repeat-1,ch:Infinity};var aW=aV.clipPos(aX);aW.ch--;aY.lastHSPos=aV.charCoords(aW,"div").left;return aX},moveToFirstNonWhiteSpaceCharacter:function(aV){var aW=aV.getCursor();return{line:aW.line,ch:av(aV.getLine(aW.line))}},moveToMatchedSymbol:function(aV,aW){var aY=aV.getCursor();var aX=aV.getLine(aY.line).charAt(aY.ch);if(z(aX)){return V(aV,aV.getCursor(),aW.symbol)}else{return aY}},moveToStartOfLine:function(aV){var aW=aV.getCursor();return{line:aW.line,ch:0}},moveToLineOrEdgeOfDocument:function(aV,aW){var aX=aW.forward?aV.lastLine():aV.firstLine();if(aW.repeatIsExplicit){aX=aW.repeat-aV.getOption("firstLineNumber")}return{line:aX,ch:av(aV.getLine(aX))}},textObjectManipulation:function(aW,aY){var a0=aY.selectedCharacter;var aV=!aY.textObjectInner;if(!aQ[a0]){return null}var aZ=aQ[a0](aW,aV);var a1=aZ.start;var aX=aZ.end;return[a1,aX]},repeatLastCharacterSearch:function(aX,aZ){var aW=o().lastChararacterSearch;var a1=aZ.repeat;var aY=aZ.forward===aW.forward;var aV=(aW.increment?1:0)*(aY?-1:1);aX.moveH(-aV,"char");aZ.inclusive=aY?true:false;var a0=aN(aX,a1,aY,aW.selectedCharacter);if(!a0){aX.moveH(aV,"char");return aX.getCursor()}a0.ch+=aV;return a0}};var y={change:function(aW,aY,aX,aV,aZ){o().registerController.pushText(aY.registerName,"change",aW.getRange(aV,aZ),aY.linewise);if(aY.linewise){aV.ch=av(aW.getLine(aV.line));aW.replaceRange("\n",aV,aZ)}else{aW.replaceRange("",aV,aZ)}aW.setCursor(aV)},"delete":function(aW,aY,aX,aV,aZ){o().registerController.pushText(aY.registerName,"delete",aW.getRange(aV,aZ),aY.linewise);aW.replaceRange("",aV,aZ);if(aY.linewise){aW.setCursor(ax.moveToFirstNonWhiteSpaceCharacter(aW))}else{aW.setCursor(aV)}},indent:function(a2,aX,aZ,a1,a3){var a4=a1.line;var aW=a3.line;var aV=(aZ.visualMode)?aX.repeat:1;if(aX.linewise){aW--}for(var a0=a4;a0<=aW;a0++){for(var aY=0;aY<aV;aY++){a2.indentLine(a0,aX.indentRight)}}a2.setCursor(a1);a2.setCursor(ax.moveToFirstNonWhiteSpaceCharacter(a2))},swapcase:function(a3,aW,aX,a2,a4,a1){var aZ=a3.getRange(a2,a4);var aV="";for(var aY=0;aY<aZ.length;aY++){var a0=aZ.charAt(aY);aV+=s(a0)?a0.toLowerCase():a0.toUpperCase()}a3.replaceRange(aV,a2,a4);a3.setCursor(a1)},yank:function(aW,aZ,aY,aV,a0,aX){o().registerController.pushText(aZ.registerName,"yank",aW.getRange(aV,a0),aZ.linewise);aW.setCursor(aX)}};var n={scrollToCursor:function(aX,aY){var aZ=aX.getCursor().line;var a1=window.getComputedStyle(aX.getScrollerElement()).getPropertyValue("height");var aW=parseInt(a1);var a0=aX.charCoords({line:aZ,ch:0},"local").top;var aV=parseInt(aW)/2;switch(aY.position){case"center":a0=a0-(aW/2)+10;break;case"bottom":a0=a0-aW;break;case"top":break}aX.scrollTo(null,a0);aX.scrollIntoView()},enterInsertMode:function(aV,aW){var aX=(aW)?aW.insertAt:null;if(aX=="eol"){var aY=aV.getCursor();aY={line:aY.line,ch:ar(aV,aY.line)};aV.setCursor(aY)}else{if(aX=="charAfter"){aV.setCursor(v(aV.getCursor(),0,1))}}aV.setOption("keyMap","vim-insert")},toggleVisualMode:function(aW,aX,aY){var a0=aX.repeat;var aV=aW.getCursor();var aZ;if(!aY.visualMode){aY.visualMode=true;aY.visualLine=!!aX.linewise;if(aY.visualLine){aV.ch=0;aZ=H(aW,{line:aV.line+a0-1,ch:ar(aW,aV.line)},true)}else{aZ=H(aW,{line:aV.line,ch:aV.ch+a0},true)}if(!aX.repeatIsExplicit&&!aY.visualLine){aW.setCursor(aZ);aW.setSelection(aZ,aV)}else{aW.setSelection(aV,aZ)}}else{aV=aW.getCursor("anchor");aZ=aW.getCursor("head");if(!aY.visualLine&&aX.linewise){aY.visualLine=true;aV.ch=aj(aV,aZ)?0:ar(aW,aV.line);aZ.ch=aj(aV,aZ)?ar(aW,aZ.line):0;aW.setSelection(aV,aZ)}else{if(aY.visualLine&&!aX.linewise){aY.visualLine=false}else{an(aW,aY)}}}am(aW,aY,"<",aj(aV,aZ)?aV:aZ);am(aW,aY,">",aj(aV,aZ)?aZ:aV)},joinLines:function(aW,aX,aY){var aV,a0;if(aY.visualMode){aV=aW.getCursor("anchor");a0=aW.getCursor("head");a0.ch=ar(aW,a0.line)-1}else{var aZ=Math.max(aX.repeat,2);aV=aW.getCursor();a0=H(aW,{line:aV.line+aZ-1,ch:Infinity})}var a1=0;aW.operation(function(){for(var a4=aV.line;a4<a0.line;a4++){a1=ar(aW,aV.line);var a3={line:aV.line+1,ch:ar(aW,aV.line+1)};var a5=aW.getRange(aV,a3);a5=a5.replace(/\n\s*/g," ");aW.replaceRange(a5,aV,a3)}var a2={line:aV.line,ch:a1};aW.setCursor(a2)})},newLineAndEnterInsertMode:function(aV,aW){var aX=aV.getCursor();if(aX.line===aV.firstLine()&&!aW.after){aV.replaceRange("\n",{line:aV.firstLine(),ch:0});aV.setCursor(aV.firstLine(),0)}else{aX.line=(aW.after)?aX.line:aX.line-1;aX.ch=ar(aV,aX.line);aV.setCursor(aX);var aY=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;aY(aV)}this.enterInsertMode(aV)},paste:function(a0,aV,aW){var a1=a0.getCursor();var a2=o().registerController.getRegister(aV.registerName);if(!a2.text){return}for(var a3="",aX=0;aX<aV.repeat;aX++){a3+=a2.text}var a4=a2.linewise;if(a4){if(aV.after){a3="\n"+a3.slice(0,a3.length-1);a1.ch=ar(a0,a1.line)}else{a1.ch=0}}else{a1.ch+=aV.after?1:0}a0.replaceRange(a3,a1);var aY;var aZ;if(a4&&aV.after){aY={line:a1.line+1,ch:av(a0.getLine(a1.line+1))}}else{if(a4&&!aV.after){aY={line:a1.line,ch:av(a0.getLine(a1.line))}}else{if(!a4&&aV.after){aZ=a0.indexFromPos(a1);aY=a0.posFromIndex(aZ+a3.length-1)}else{aZ=a0.indexFromPos(a1);aY=a0.posFromIndex(aZ+a3.length)}}}a0.setCursor(aY)},undo:function(aV,aW){W(aV,CodeMirror.commands.undo,aW.repeat)()},redo:function(aV,aW){W(aV,CodeMirror.commands.redo,aW.repeat)()},setRegister:function(aV,aW,aX){aX.inputState.registerName=aW.selectedCharacter},setMark:function(aV,aW,aX){var aY=aW.selectedCharacter;am(aV,aX,aY,aV.getCursor())},replace:function(a1,aW,aY){var aX=aW.selectedCharacter;var a0=a1.getCursor();var aZ;var a2;if(aY.visualMode){a0=a1.getCursor("start");a2=a1.getCursor("end");a2=a1.clipPos({line:a2.line,ch:a2.ch+1})}else{var a3=a1.getLine(a0.line);aZ=a0.ch+aW.repeat;if(aZ>a3.length){aZ=a3.length}a2={line:a0.line,ch:aZ}}if(aX=="\n"){if(!aY.visualMode){a1.replaceRange("",a0,a2)}(CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent)(a1)}else{var aV=a1.getRange(a0,a2);aV=aV.replace(/[^\n]/g,aX);a1.replaceRange(aV,a0,a2);if(aY.visualMode){a1.setCursor(a0);an(a1,aY)}else{a1.setCursor(v(a2,0,-1))}}},incrementNumberToken:function(a6,aW,a0){var a7=a6.getCursor();var a2=a6.getLine(a7.line);var a9=/-?\d+/g;var a1;var aV;var aZ;var a8;var aX;while((a1=a9.exec(a2))!==null){aX=a1[0];aV=a1.index;aZ=aV+aX.length;if(a7.ch<aZ){break}}if(!aW.backtrack&&(aZ<=a7.ch)){return}if(aX){var a5=aW.increase?1:-1;var aY=parseInt(aX)+(a5*aW.repeat);var a4={ch:aV,line:a7.line};var a3={ch:aZ,line:a7.line};a8=aY.toString();a6.replaceRange(a8,a4,a3)}else{return}a6.setCursor({line:a7.line,ch:aV+a8.length-1})},repeatLastEdit:function(aV,aW,aX){var aZ=aX.lastEdit;if(aZ){if(aW.repeat&&aW.repeatIsExplicit){aX.lastEdit.repeatOverride=aW.repeat}var aY=aX.inputState;aX.inputState=aX.lastEdit;aB.evalInput(aV,aX);aX.inputState=aY}}};var aQ={w:function(aW,aV){return ac(aW,aV,true,false)},W:function(aW,aV){return ac(aW,aV,true,true)},"{":function(aW,aV){return m(aW,"}",aV)},"(":function(aW,aV){return m(aW,")",aV)},"[":function(aW,aV){return m(aW,"]",aV)},"'":function(aW,aV){return al(aW,"'",aV)},'"':function(aW,aV){return al(aW,'"',aV)}};function H(aW,a0,aY){var aX=Math.min(Math.max(aW.firstLine(),a0.line),aW.lastLine());var aV=ar(aW,aX)-1;aV=(aY)?aV+1:aV;var aZ=Math.min(Math.max(0,a0.ch),aV);return{line:aX,ch:aZ}}function ao(aX,aW){for(var aV in aW){if(aW.hasOwnProperty(aV)){aX[aV]=aW[aV]}}}function aG(aW){var aV={};for(var aX in aW){if(aW.hasOwnProperty(aX)){aV[aX]=aW[aX]}}return aV}function v(aW,aV,aX){return{line:aW.line+aV,ch:aW.ch+aX}}function aP(aW,aV){if(aW.length!=aV.length){return false}for(var aX=0;aX<aW.length;aX++){if(aW[aX]!=aV[aX]){return false}}return true}function aI(aX,aV){for(var aW=0;aW<aX.length;aW++){if(aX[aW]!=aV[aW]&&aV[aW]!="character"){return false}}return true}function h(aX,aV){for(var aW=0;aW<aX.length;aW++){if(aX[aW]!=aV[aW]){return false}}return true}function W(aV,aW,aX){return function(){for(var aY=0;aY<aX;aY++){aW(aV)}}}function u(aV){return{line:aV.line,ch:aV.ch}}function aT(aW,aV){return aW.ch==aV.ch&&aW.line==aV.line}function aj(aW,aV){if(aW.line<aV.line){return true}else{if(aW.line==aV.line&&aW.ch<aV.ch){return true}}return false}function ap(aY,aX,aW){var aZ=aj(aY,aX);var aV=aj(aX,aW);return aZ&&aV}function ar(aV,aW){return aV.getLine(aW).length}function j(aV){return aV.split("").reverse().join("")}function aA(aV){if(aV.trim){return aV.trim()}else{return aV.replace(/^\s+|\s+$/g,"")}}function g(aV){return aV.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function an(aV,aW){aW.visualMode=false;aW.visualLine=false;var aX=aV.getCursor("anchor");var aY=aV.getCursor("head");if(!aT(aX,aY)){aV.setCursor(H(aV,aY))}}function R(aW,aV,aZ){var aY=aW.getRange(aV,aZ);var aX=aY.split("\n");if(aX.length>1&&B(aX.pop())){aZ.line--;aZ.ch=ar(aW,aZ.line)}}function aF(aW,aV,aX){aV.ch=0;aX.ch=0;aX.line++}function av(aW){if(!aW){return 0}var aV=aW.search(/\S/);return aV==-1?aW.length:aV}function ac(a2,a1,aZ,a0,a9){var a4=a2.getCursor();var ba=a2.getLine(a4.line);var a3=a4.ch;var aV=ba.substring(a3);var aY;if(a9){aY=aV.search(/\w/)}else{aY=aV.search(/\S/)}if(aY==-1){return null}a3+=aY;aV=ba.substring(a3);var aX=ba.substring(0,a3);var a8;if(a0){a8=/^\S+/}else{if((/\w/).test(ba.charAt(a3))){a8=/^\w+/}else{a8=/^[^\w\s]+/}}var a7=a8.exec(aV);var a6=a3;var a5=a3+a7[0].length-1;var aW=a8.exec(j(aX));if(aW){a6-=aW[0].length}if(a1){a5++}return{start:{line:a4.line,ch:a6},end:{line:a4.line,ch:a5}}}function aa(aV,aW){var aX=o();aX.lastChararacterSearch.increment=aV;aX.lastChararacterSearch.forward=aW.forward;aX.lastChararacterSearch.selectedCharacter=aW.selectedCharacter}var C={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"};var au={bracket:{isComplete:function(aV){if(aV.nextCh===aV.symb){aV.depth++;if(aV.depth>=1){return true}}else{if(aV.nextCh===aV.reverseSymb){aV.depth--}}return false}},section:{init:function(aV){aV.curMoveThrough=true;aV.symb=(aV.forward?"]":"[")===aV.symb?"{":"}"},isComplete:function(aV){return aV.index===0&&aV.nextCh===aV.symb}},comment:{isComplete:function(aW){var aV=aW.lastCh==="*"&&aW.nextCh==="/";aW.lastCh=aW.nextCh;return aV}},method:{init:function(aV){aV.symb=(aV.symb==="m"?"{":"}");aV.reverseSymb=aV.symb==="{"?"}":"{"},isComplete:function(aV){if(aV.nextCh===aV.symb){return true}return false}},preprocess:{init:function(aV){aV.index=0},isComplete:function(aW){if(aW.nextCh==="#"){var aV=aW.lineText.match(/#(\w+)/)[1];if(aV==="endif"){if(aW.forward&&aW.depth===0){return true}aW.depth++}else{if(aV==="if"){if(!aW.forward&&aW.depth===0){return true}aW.depth--}}if(aV==="else"&&aW.depth===0){return true}}return false}}};function aO(a4,aW,aZ,aX){var a7=a4.getCursor();var a5=aZ?1:-1;var aY=aZ?a4.lineCount():-1;var a3=a7.ch;var a9=a7.line;var a2=a4.getLine(a9);var aV={lineText:a2,nextCh:a2.charAt(a3),lastCh:null,index:a3,symb:aX,reverseSymb:(aZ?{")":"(","}":"{"}:{"(":")","{":"}"})[aX],forward:aZ,depth:0,curMoveThrough:false};var a0=C[aX];if(!a0){return a7}var a8=au[a0].init;var a6=au[a0].isComplete;if(a8){a8(aV)}while(a9!==aY&&aW){aV.index+=a5;aV.nextCh=aV.lineText.charAt(aV.index);if(!aV.nextCh){a9+=a5;aV.lineText=a4.getLine(a9)||"";if(a5>0){aV.index=0}else{var a1=aV.lineText.length;aV.index=(a1>0)?(a1-1):0}aV.nextCh=aV.lineText.charAt(aV.index)}if(a6(aV)){a7.line=a9;a7.ch=aV.index;aW--}}if(aV.nextCh||aV.curMoveThrough){return{line:a9,ch:aV.index}}return a7}function aR(a4,a5,aY,a3){var aZ=a5.line;var a2=a5.ch;var a8=a4.getLine(aZ);var aW=aY?1:-1;var a0=a3?aJ:U;while(true){var a1=(aW>0)?a8.length:-1;var a7=a1,a6=a1;while(a2!=a1){var aV=false;for(var aX=0;aX<a0.length&&!aV;++aX){if(a0[aX].test(a8.charAt(a2))){a7=a2;while(a2!=a1&&a0[aX].test(a8.charAt(a2))){a2+=aW}a6=a2;aV=a7!=a6;if(a7==a5.ch&&aZ==a5.line&&a6==a7+aW){continue}else{return{from:Math.min(a7,a6+1),to:Math.max(a7,a6),line:aZ}}}}if(!aV){a2+=aW}}aZ+=aW;if(!d(a4,aZ)){return null}a8=a4.getLine(aZ);a2=(aW>0)?0:a8.length}throw"The impossible happened."}function Z(a1,aW,aZ,a4,a0){var a2=a1.getCursor();for(var aY=0;aY<aW;aY++){var aX=a2.ch,a3=a2.line,aV;var a5=false;while(!a5){aV=aR(a1,a2,aZ,a0);a5=true;if(aV){a2.line=aV.line;if(aZ&&a4){a2.ch=aV.to-1}else{if(aZ&&!a4){if(G(a2.ch,aV.from,aV.to)&&aV.line==a3){a5=false;a2.ch=aV.to-1}else{a2.ch=aV.from}}else{if(!aZ&&a4){if(G(a2.ch,aV.from,aV.to)&&aV.line==a3){a5=false;a2.ch=aV.from}else{a2.ch=aV.to}}else{if(!aZ&&!a4){a2.ch=aV.from}}}}}else{if(aZ){return{line:a2.line,ch:ar(a1,a2.line)}}else{return{line:a2.line,ch:0}}}}}return a2}function aN(a0,aW,aY,aZ){var a2=a0.getCursor();var aV=a2.ch;var a1;for(var aX=0;aX<aW;aX++){var a3=a0.getLine(a2.line);a1=aD(aV,a3,aZ,aY,true);if(a1==-1){return null}aV=a1}return{line:a0.getCursor().line,ch:a1}}function P(aV,aX){var aW=aV.getCursor().line;return H(aV,{line:aW,ch:aX-1})}function am(aV,aW,aX,aY){if(!x(aX,ad)){return}if(aW.marks[aX]){aW.marks[aX].clear()}aW.marks[aX]=aV.setBookmark(aY)}function aD(a0,aW,aZ,aX,aY){var aV;if(aX){aV=aW.indexOf(aZ,a0+1);if(aV!=-1&&!aY){aV-=1}}else{aV=aW.lastIndexOf(aZ,a0-1);if(aV!=-1&&!aY){aV+=1}}return aV}function V(a3,a5,aW){var a6=a5.line;aW=aW?aW:a3.getLine(a6).charAt(a5.ch);var aY=({"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"})[aW];if(!aY){return a5}var a4=({"(":1,"{":1,"[":1})[aW]||-1;var aX=a4===1?a3.lineCount():-1;var aZ=1,aV=aW,a0=a5.ch,a2=a3.getLine(a6);while(a6!==aX&&aZ>0){a0+=a4;aV=a2.charAt(a0);if(!aV){a6+=a4;a2=a3.getLine(a6)||"";if(a4>0){a0=0}else{var a1=a2.length;a0=(a1>0)?(a1-1):0}aV=a2.charAt(a0)}if(aV===aW){aZ++}else{if(aV===aY){aZ--}}}if(aV){return{line:a6,ch:a0}}return a5}function m(aW,aZ,aV){var aY=aW.getCursor();var aX=V(aW,aY,aZ);var a0=V(aW,aX);a0.ch+=aV?1:0;aX.ch+=aV?0:1;return{start:a0,end:aX}}function e(aV,aX,aY){for(var aW=!aY?aV.length:aY;aW>=0;--aW){if(aX.test(aV.charAt(aW))){return aW}}return -1}function al(a3,aX,a2){var a4=a3.getCursor();var a5=a3.getLine(a4.line);var a1=a5.split("");var aW,aY,aZ,a0;var aV=a1.indexOf(aX);if(a4.ch<aV){a4.ch=aV}else{if(aV<a4.ch&&a1[a4.ch]==aX){aY=a4.ch;--a4.ch}}if(a1[a4.ch]==aX&&!aY){aW=a4.ch+1}else{for(aZ=a4.ch;aZ>-1&&!aW;aZ--){if(a1[aZ]==aX){aW=aZ+1}}}if(aW&&!aY){for(aZ=aW,a0=a1.length;aZ<a0&&!aY;aZ++){if(a1[aZ]==aX){aY=aZ}}}if(!aW||!aY){return{start:a4,end:a4}}if(a2){--aW;++aY}return{start:{line:a4.line,ch:aW},end:{line:a4.line,ch:aY}}}function J(){}J.prototype={getQuery:function(){return o().query},setQuery:function(aV){o().query=aV},getOverlay:function(){return this.searchOverlay},setOverlay:function(aV){this.searchOverlay=aV},isReversed:function(){return o().isReversed},setReversed:function(aV){o().isReversed=aV}};function af(aV){var aW=aC(aV);return aW.searchState_||(aW.searchState_=new J())}function I(aV,aY,aZ,aW,aX){if(aV.openDialog){aV.openDialog(aY,aW,{bottom:true,value:aX.value,onKeyDown:aX.onKeyDown,onKeyUp:aX.onKeyUp})}else{callback(prompt(aZ,""))}}function Q(aY){var aW=false;var aX=[];for(var aV=0;aV<aY.length;aV++){var aZ=aY.charAt(aV);if(!aW&&aZ=="/"){aX.push(aV)}aW=(aZ=="\\")}return aX}function X(a1,aZ,aX,a2){if(aZ instanceof RegExp){return aZ}var a0=Q(aZ);var a3;var aW;if(!a0.length){a3=aZ}else{a3=aZ.substring(0,a0[0]);var aV=aZ.substring(a0[0]);aW=(aV.indexOf("i")!=-1)}if(!a3){return null}if(a2){aX=(/^[^A-Z]*$/).test(a3)}var aY=new RegExp(a3,(aX||aW)?"i":undefined);return aY}function aH(aV,aW){if(aV.openConfirm){aV.openConfirm('<span style="color: red">'+aW+'</span> <button type="button">OK</button>',function(){},{bottom:true})}else{alert(aW)}}function ae(aW,aX){var aV="";if(aW){aV+='<span style="font-family: monospace">'+aW+"</span>"}aV+='<input type="text"/> <span style="color: #888">';if(aX){aV+='<span style="color: #888">';aV+=aX;aV+="</span>"}return aV}var A="(Javascript regexp)";function aw(aW,aX){var aY=(aX.prefix||"")+" "+(aX.desc||"");var aV=ae(aX.prefix,aX.desc);I(aW,aV,aY,aX.onClose,aX)}function F(aW,aV){if(aW instanceof RegExp&&aV instanceof RegExp){var aY=["global","multiline","ignoreCase","source"];for(var aX=0;aX<aY.length;aX++){var aZ=aY[aX];if(aW[aZ]!==aV[aZ]){return(false)}}return(true)}return(false)}function aS(aV,a0,aW,aX){if(!a0){return}var aZ=af(aV);var aY=X(aV,a0,!!aW,!!aX);if(!aY){return}ag(aV,aY);if(F(aY,aZ.getQuery())){return aY}aZ.setQuery(aY);return aY}function ai(aW){if(aW.source.charAt(0)=="^"){var aV=true}return{token:function(aY){if(aV&&!aY.sol()){aY.skipToEnd();return}var aX=aY.match(aW,false);if(aX){if(aX[0].length==0){aY.next();return}if(!aY.sol()){aY.backUp(1);if(!aW.exec(aY.next()+aX[0])){aY.next();return null}}aY.match(aW);return"searching"}while(!aY.eol()){aY.next();if(aY.match(aW,false)){break}}},query:aW}}function ag(aV,aX){var aW=af(aV).getOverlay();if(!aW||aX!=aW.query){if(aW){aV.removeOverlay(aW)}aW=ai(aX);aV.addOverlay(aW);af(aV).setOverlay(aW)}}function aU(aV,aW,aY,aX){if(aX===undefined){aX=1}return aV.operation(function(){var a1=aV.getCursor();if(!aW){a1.ch+=1}var a0=aV.getSearchCursor(aY,a1);for(var aZ=0;aZ<aX;aZ++){if(!a0.find(aW)){a0=aV.getSearchCursor(aY,(aW)?{line:aV.lastLine()}:{line:aV.firstLine(),ch:0});if(!a0.find(aW)){return}}}return a0.from()})}function ah(aV){aV.removeOverlay(af(aV).getOverlay());af(aV).setOverlay(null)}function K(aX,aW,aV){if(typeof aX!="number"){aX=aX.line}if(aW instanceof Array){return x(aX,aW)}else{if(aV){return(aX>=aW&&aX<=aV)}else{return aX==aW}}}function aE(aV){var aY=aV.getScrollInfo();var aX=6;var a1=10;var a0=aV.coordsChar({left:0,top:aX},"local");var aW=aY.clientHeight-a1;var aZ=aV.coordsChar({left:0,top:aW},"local");return{top:a0.line,bottom:aZ.line}}var t=[{name:"map",type:"builtIn"},{name:"write",shortName:"w",type:"builtIn"},{name:"undo",shortName:"u",type:"builtIn"},{name:"redo",shortName:"red",type:"builtIn"},{name:"substitute",shortName:"s",type:"builtIn"},{name:"nohlsearch",shortName:"noh",type:"builtIn"},{name:"delmarks",shortName:"delm",type:"builtin"}];c.ExCommandDispatcher=function(){this.buildCommandMap_()};c.ExCommandDispatcher.prototype={processCommand:function(aV,aW){var aZ=new CodeMirror.StringStream(aW);var a2={};a2.input=aW;try{this.parseInput_(aV,aZ,a2)}catch(a0){aH(aV,a0);return}var aY;if(!a2.commandName){if(a2.line!==undefined){aY="move"}}else{var a1=this.matchCommand_(a2.commandName);if(a1){aY=a1.name;this.parseCommandArgs_(aZ,a2,a1);if(a1.type=="exToKey"){for(var aX=0;aX<a1.toKeys.length;aX++){b.handleKey(aV,a1.toKeys[aX])}return}else{if(a1.type=="exToEx"){this.processCommand(aV,a1.toInput);return}}}}if(!aY){aH(aV,'Not an editor command ":'+aW+'"');return}az[aY](aV,a2)},parseInput_:function(aW,aX,aV){aX.eatWhile(":");if(aX.eat("%")){aV.line=aW.firstLine();aV.lineEnd=aW.lastLine()}else{aV.line=this.parseLineSpec_(aW,aX);if(aV.line!==undefined&&aX.eat(",")){aV.lineEnd=this.parseLineSpec_(aW,aX)}}var aY=aX.match(/^(\w+)/);if(aY){aV.commandName=aY[1]}else{aV.commandName=aX.match(/.*/)[0]}return aV},parseLineSpec_:function(aV,aW){var aX=aW.match(/^(\d+)/);if(aX){return parseInt(aX[1],10)-1}switch(aW.next()){case".":return aV.getCursor().line;case"$":return aV.lastLine();case"'":var aY=aC(aV).marks[aW.next()];if(aY&&aY.find()){return aY.find().line}else{throw"Mark not set"}break;default:aW.backUp(1);return aV.getCursor().line}},parseCommandArgs_:function(aW,aZ,aY){if(aW.eol()){return}aZ.argString=aW.match(/.*/)[0];var aX=aY.argDelimiter||/\s+/;var aV=aA(aZ.argString).split(aX);if(aV.length&&aV[0]){aZ.args=aV}},matchCommand_:function(aW){for(var aV=aW.length;aV>0;aV--){var aX=aW.substring(0,aV);if(this.commandMap_[aX]){var aY=this.commandMap_[aX];if(aY.name.indexOf(aW)===0){return aY}}}return null},buildCommandMap_:function(){this.commandMap_={};for(var aW=0;aW<t.length;aW++){var aX=t[aW];var aV=aX.shortName||aX.name;this.commandMap_[aV]=aX}},map:function(aV,aX){if(aV!=":"&&aV.charAt(0)==":"){var aW=aV.substring(1);if(aX!=":"&&aX.charAt(0)==":"){this.commandMap_[aW]={name:aW,type:"exToEx",toInput:aX.substring(1)}}else{this.commandMap_[aW]={name:aW,type:"exToKey",toKeys:O(aX)}}}else{if(aX!=":"&&aX.charAt(0)==":"){a.unshift({keys:O(aV),type:"keyToEx",exArgs:{input:aX.substring(1)}})}else{a.unshift({keys:O(aV),type:"keyToKey",toKeys:O(aX)})}}}};function O(a2){var aW=0;var a1=[];while(aW<a2.length){if(a2.charAt(aW)!="<"){a1.push(a2.charAt(aW));aW++;continue}var aV=++aW;while(a2.charAt(aW++)!=">"){}var a0=a2.substring(aV,aW-1);var aZ="";var aX=(/^C-(.+)$/).exec(a0);if(aX){aZ="Ctrl-";a0=aX[1]}var aY;switch(a0){case"BS":aY="Backspace";break;case"CR":aY="Enter";break;case"Del":aY="Delete";break;default:aY=a0;break}a1.push(aZ+aY)}return a1}var az={map:function(aV,aX){var aW=aX.args;if(!aW||aW.length<2){if(aV){aH(aV,"Invalid mapping: "+aX.input)}return}l.map(aW[0],aW[1],aV)},move:function(aV,aW){aB.processCommand(aV,aC(aV),{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:false,explicitRepeat:true,linewise:true},repeatOverride:aW.line+1})},substitute:function(a9,aY){var aV=aY.argString;var a8=Q(aV);if(a8[0]!==0){aH(a9,"Substitutions should be of the form :s/pattern/replace/");return}var ba=aV.substring(a8[0]+1,a8[1]);var a2="";var a3;var a4;if(a8[1]){a2=aV.substring(a8[1]+1,a8[2])}if(a8[2]){var a1=aV.substring(a8[2]+1).split(" ");a3=a1[0];a4=parseInt(a1[1])}if(a3){ba=ba+"/"+a3}if(ba){try{aS(a9,ba,true,true)}catch(a6){aH(a9,"Invalid regex: "+ba);return}}var aW=af(a9);var a7=aW.getQuery();var a0=aY.line||a9.firstLine();var aZ=aY.lineEnd||a0;if(a4){a0=aZ;aZ=a0+a4-1}var a5=H(a9,{line:a0,ch:0});function aX(){for(var be=a9.getSearchCursor(a7,a5);be.findNext()&&K(be.from(),a0,aZ);){var bd=a9.getRange(be.from(),be.to());var bc=bd.replace(a7,a2);be.replace(bc)}var bb=aC(a9);if(bb.visualMode){an(a9,bb)}}a9.operation(aX)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(aV){if(CodeMirror.commands.save){CodeMirror.commands.save(aV)}else{aV.save()}},nohlsearch:function(aV){ah(aV)},delmarks:function(a5,a0){if(!a0.argString||!a0.argString.trim()){aH(a5,"Argument required");return}var aV=aC(a5);var a6=new CodeMirror.StringStream(a0.argString.trim());while(!a6.eol()){a6.eatSpace();var a3=a6.pos;if(!a6.match(/[a-zA-Z]/,false)){aH(a5,"Invalid argument: "+a0.argString.substring(a3));return}var aX=a6.next();if(a6.match("-",true)){if(!a6.match(/[a-zA-Z]/,false)){aH(a5,"Invalid argument: "+a0.argString.substring(a3));return}var aY=aX;var a2=a6.next();if(w(aY)&&w(a2)||s(aY)&&s(a2)){var aW=aY.charCodeAt(0);var a4=a2.charCodeAt(0);if(aW>=a4){aH(a5,"Invalid argument: "+a0.argString.substring(a3));return}for(var a1=0;a1<=a4-aW;a1++){var aZ=String.fromCharCode(aW+a1);delete aV.marks[aZ]}}else{aH(a5,"Invalid argument: "+aY+"-");return}}else{delete aV.marks[aX]}}}};var l=new c.ExCommandDispatcher();function ab(){function aY(a1,a2,a0){if(s(a2)){if(a0=="Shift"){a0=null}else{a2=a2.toLowerCase()}}if(a0){a2=a0+"-"+a2}b.handleKey(a1,a2)}function aW(a1,a0){return function(a2){aY(a2,a1,a0)}}var aV=["Shift","Ctrl"];var aZ={nofallthrough:true,style:"fat-cursor"};function aX(a3,a0){for(var a2=0;a2<a3.length;a2++){var a1=a3[a2];if(!a0&&x(a1,i)){a1="'"+a1+"'"}if(a0){aZ[a0+"-"+a1]=aW(a3[a2],a0)}else{aZ[a1]=aW(a3[a2])}}}aX(M);aX(M,"Shift");aX(M,"Ctrl");aX(i);aX(i,"Ctrl");aX(D);aX(D,"Ctrl");aX(aq);aX(aq,"Ctrl");return aZ}CodeMirror.keyMap.vim=ab();function r(aV){aV.setCursor(aV.getCursor().line,aV.getCursor().ch-1,true);aV.setOption("keyMap","vim")}CodeMirror.keyMap["vim-insert"]={Esc:r,"Ctrl-[":r,"Ctrl-C":r,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(aV){var aW=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;aW(aV)},fallthrough:["default"]};return ak};var b=c();CodeMirror.Vim=b})();