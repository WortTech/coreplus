CodeMirror.showHint=function(g,e,j){if(!j){j={}}var c=g.getCursor().ch,b=false;var h=j.closeCharacters||/[\s()\[\]{};:]/;function d(){if(g.somethingSelected()){return}if(j.async){e(g,f,j)}else{return f(e(g,j))}}function i(k){if(typeof k=="string"){return k}else{return k.text}}function a(k,m,l){if(l.hint){l.hint(k,m,l)}else{k.replaceRange(i(l),m.from,m.to)}}function f(T){if(!T||!T.list.length){return}var t=T.list;if(!b&&j.completeSingle!==false&&t.length==1){a(g,T,t[0]);CodeMirror.signal(T,"close");return true}var O=document.createElement("ul"),H=0;O.className="CodeMirror-hints";for(var R=0;R<t.length;++R){var P=O.appendChild(document.createElement("li")),N=t[R];var S="CodeMirror-hint"+(R?"":" CodeMirror-hint-active");if(N.className!=null){S=N.className+" "+S}P.className=S;if(N.render){N.render(P,T,N)}else{P.appendChild(document.createTextNode(N.displayText||i(N)))}P.hintId=R}var G=g.cursorCoords(j.alignWithWord!==false?T.from:null);var n=G.left,o=G.bottom,J=true;O.style.left=n+"px";O.style.top=o+"px";document.body.appendChild(O);CodeMirror.signal(T,"shown");var Q=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);var k=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);var q=O.getBoundingClientRect();var E=q.right-Q,C=q.bottom-k;if(E>0){if(q.right-q.left>Q){O.style.width=(Q-5)+"px";E-=(q.right-q.left)-Q}O.style.left=(n=G.left-E)+"px"}if(C>0){var l=q.bottom-q.top;if(q.top-(G.bottom-G.top)-l>0){C=l+(G.bottom-G.top);J=false}else{if(l>k){O.style.height=(k-5)+"px";C-=l-k}}O.style.top=(o=G.bottom-C)+"px"}function y(U){U=Math.max(0,Math.min(U,t.length-1));if(H==U){return}var V=O.childNodes[H];V.className=V.className.replace(" CodeMirror-hint-active","");V=O.childNodes[H=U];V.className+=" CodeMirror-hint-active";if(V.offsetTop<O.scrollTop){O.scrollTop=V.offsetTop-3}else{if(V.offsetTop+V.offsetHeight>O.scrollTop+O.clientHeight){O.scrollTop=V.offsetTop+V.offsetHeight-O.clientHeight+3}}CodeMirror.signal(T,"select",t[H],V)}function K(){return Math.floor(O.clientHeight/O.firstChild.offsetHeight)||1}var u,B={Up:function(){y(H-1)},Down:function(){y(H+1)},PageUp:function(){y(H-K())},PageDown:function(){y(H+K())},Home:function(){y(0)},End:function(){y(t.length-1)},Enter:x,Tab:x,Esc:M};if(j.customKeys){u={};for(var v in j.customKeys){if(j.customKeys.hasOwnProperty(v)){var D=j.customKeys[v];if(B.hasOwnProperty(D)){D=B[D]}u[v]=D}}}else{u=B}g.addKeyMap(u);g.on("cursorActivity",m);var z;function w(){z=setTimeout(M,100)}function I(){clearTimeout(z)}g.on("blur",w);g.on("focus",I);var p=g.getScrollInfo();function s(){var X=g.getScrollInfo(),W=g.getWrapperElement().getBoundingClientRect();var V=o+p.top-X.top,U=V;if(!J){U+=O.offsetHeight}if(U<=W.top||U>=W.bottom){return M()}O.style.top=V+"px";O.style.left=(n+p.left-X.left)+"px"}g.on("scroll",s);CodeMirror.on(O,"dblclick",function(V){var U=V.target||V.srcElement;if(U.hintId!=null){H=U.hintId;x()}});CodeMirror.on(O,"click",function(V){var U=V.target||V.srcElement;if(U.hintId!=null){y(U.hintId)}});CodeMirror.on(O,"mousedown",function(){setTimeout(function(){g.focus()},20)});var r=false,A;function M(U){if(r){return}r=true;clearTimeout(A);O.parentNode.removeChild(O);g.removeKeyMap(u);g.off("cursorActivity",m);g.off("blur",w);g.off("focus",I);g.off("scroll",s);if(U!==true){CodeMirror.signal(T,"close")}}function x(){a(g,T,t[H]);M()}var A,L=g.getCursor(),F=g.getLine(L.line).length;function m(){clearTimeout(A);var V=g.getCursor(),U=g.getLine(V.line);if(V.line!=L.line||U.length-V.ch!=F-L.ch||V.ch<c||g.somethingSelected()||(V.ch&&h.test(U.charAt(V.ch-1)))){M()}else{A=setTimeout(function(){M(true);b=true;d()},70)}}CodeMirror.signal(T,"select",t[0],O.firstChild);return true}return d()};