CodeMirror.validate=(function(){var b="CodeMirror-lint-markers";var o=/^(?:error|warning)$/;function f(w,v){var u=document.createElement("div");u.className="CodeMirror-lint-tooltip";u.appendChild(v.cloneNode(true));document.body.appendChild(u);function t(x){if(!u.parentNode){return CodeMirror.off(document,"mousemove",t)}u.style.top=Math.max(0,x.clientY-u.offsetHeight-5)+"px";u.style.left=(x.clientX+5)+"px"}CodeMirror.on(document,"mousemove",t);t(w);if(u.style.opacity!=null){u.style.opacity=1}return u}function k(t){if(t.parentNode){t.parentNode.removeChild(t)}}function i(t){if(!t.parentNode){return}if(t.style.opacity==null){k(t)}t.style.opacity=0;setTimeout(function(){k(t)},600)}function s(x,v,u){var w=f(x,v);function t(){CodeMirror.off(u,"mouseout",t);if(w){i(w);w=null}}var y=setInterval(function(){if(w){for(var z=u;;z=z.parentNode){if(z==document.body){return}if(!z){t();break}}}if(!w){return clearInterval(y)}},400);CodeMirror.on(u,"mouseout",t)}function m(t,v,u){this.marked=[];this.options=v;this.timeout=null;this.hasGutter=u;this.onMouseOver=function(w){n(t,w)}}function a(t){if(t instanceof Function){return{getAnnotations:t}}else{if(!t||!t.getAnnotations){throw new Error("Required option 'getAnnotations' missing (lint addon)")}}return t}function e(t){var v=t._lintState;if(v.hasGutter){t.clearGutter(b)}for(var u=0;u<v.marked.length;++u){v.marked[u].clear()}v.marked.length=0}function r(y,w,t,x){var u=document.createElement("div"),v=u;u.className="CodeMirror-lint-marker-"+w;if(t){v=u.appendChild(document.createElement("div"));v.className="CodeMirror-lint-marker-multiple"}if(x!=false){CodeMirror.on(v,"mouseover",function(z){s(z,y,v)})}return u}function g(u,t){if(u=="error"){return u}else{return t}}function h(x){var u=[];for(var v=0;v<x.length;++v){var w=x[v],t=w.from.line;(u[t]||(u[t]=[])).push(w)}return u}function c(v){var t=v.severity;if(!o.test(t)){t="error"}var u=document.createElement("div");u.className="CodeMirror-lint-message-"+t;u.appendChild(document.createTextNode(v.message));return u}function q(t){var v=t._lintState,u=v.options;if(u.async){u.getAnnotations(t,l,u)}else{l(t,u.getAnnotations(t.getValue()))}}function l(A,z){e(A);var u=A._lintState,C=u.options;var y=h(z);for(var D=0;D<y.length;++D){var w=y[D];if(!w){continue}var E=null;var v=u.hasGutter&&document.createDocumentFragment();for(var x=0;x<w.length;++x){var t=w[x];var B=t.severity;if(!o.test(B)){B="error"}E=g(E,B);if(C.formatAnnotation){t=C.formatAnnotation(t)}if(u.hasGutter){v.appendChild(c(t))}if(t.to){u.marked.push(A.markText(t.from,t.to,{className:"CodeMirror-lint-span-"+B,__annotation:t}))}}if(u.hasGutter){A.setGutterMarker(D,b,r(v,E,w.length>1,u.options.tooltips))}}if(C.onUpdateLinting){C.onUpdateLinting(z,y,A)}}function p(t){var u=t._lintState;clearTimeout(u.timeout);u.timeout=setTimeout(function(){q(t)},u.options.delay||500)}function j(t,v){var u=v.target||v.srcElement;s(v,c(t),u)}var d=[0,0,0,5,0,-5,5,0,-5,0];function n(t,z){if(!/\bCodeMirror-lint-span-/.test((z.target||z.srcElement).className)){return}for(var w=0;w<d.length;w+=2){var v=t.findMarksAt(t.coordsChar({left:z.clientX+d[w],top:z.clientY+d[w+1]}));for(var u=0;u<v.length;++u){var x=v[u],y=x.__annotation;if(y){return j(y,z)}}}}CodeMirror.defineOption("lintWith",false,function(t,z,u){if(u&&u!=CodeMirror.Init){e(t);t.off("change",p);CodeMirror.off(t.getWrapperElement(),"mouseover",t._lintState.onMouseOver);delete t._lintState}if(z){var v=t.getOption("gutters"),x=false;for(var w=0;w<v.length;++w){if(v[w]==b){x=true}}var y=t._lintState=new m(t,a(z),x);t.on("change",p);if(y.options.tooltips!=false){CodeMirror.on(t.getWrapperElement(),"mouseover",y.onMouseOver)}q(t)}})})();