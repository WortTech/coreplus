// plugin.js
tinymce.PluginManager.add("insertdatetime",function(g){var a="Sun Mon Tue Wed Thu Fri Sat Sun".split(" ");var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" ");var f="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");var c="January February March April May June July August September October November December".split(" ");var e=[],d;function b(i,k){function j(n,l){n=""+n;if(n.length<l){for(var m=0;m<(l-n.length);m++){n="0"+n}}return n}k=k||new Date();i=i.replace("%D","%m/%d/%Y");i=i.replace("%r","%I:%M:%S %p");i=i.replace("%Y",""+k.getFullYear());i=i.replace("%y",""+k.getYear());i=i.replace("%m",j(k.getMonth()+1,2));i=i.replace("%d",j(k.getDate(),2));i=i.replace("%H",""+j(k.getHours(),2));i=i.replace("%M",""+j(k.getMinutes(),2));i=i.replace("%S",""+j(k.getSeconds(),2));i=i.replace("%I",""+((k.getHours()+11)%12+1));i=i.replace("%p",""+(k.getHours()<12?"AM":"PM"));i=i.replace("%B",""+g.translate(c[k.getMonth()]));i=i.replace("%b",""+g.translate(f[k.getMonth()]));i=i.replace("%A",""+g.translate(h[k.getDay()]));i=i.replace("%a",""+g.translate(a[k.getDay()]));i=i.replace("%%","%");return i}g.addCommand("mceInsertDate",function(){var i=b(g.getParam("plugin_insertdate_dateFormat",g.translate("%Y-%m-%d")));g.execCommand("mceInsertContent",false,i)});g.addCommand("mceInsertTime",function(){var i=b(g.getParam("plugin_insertdate_timeFormat",g.translate("%H:%M:%S")));g.execCommand("mceInsertContent",false,i)});g.addButton("inserttime",{type:"splitbutton",title:"Insert time",onclick:function(){g.insertContent(b(d||"%H:%M:%S"))},menu:e});tinymce.each(["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(i){e.push({text:b(i),onclick:function(){d=i;g.insertContent(b(i))}})});g.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:e,context:"insert"})});