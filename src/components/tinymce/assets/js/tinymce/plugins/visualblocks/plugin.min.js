// plugin.js
tinymce.PluginManager.add("visualblocks",function(c,b){var e,d,a;if(!window.NodeList){return}c.addCommand("mceVisualBlocks",function(){var g=c.dom,f;if(!e){e=g.uniqueId();f=g.create("link",{id:e,rel:"stylesheet",href:b+"/css/visualblocks.css"});c.getDoc().getElementsByTagName("head")[0].appendChild(f)}c.on("PreviewFormats AfterPreviewFormats",function(h){if(a){g.toggleClass(c.getBody(),"mce-visualblocks",h.type=="afterpreviewformats")}});g.toggleClass(c.getBody(),"mce-visualblocks");a=c.dom.hasClass(c.getBody(),"mce-visualblocks");if(d){d.active(g.hasClass(c.getBody(),"mce-visualblocks"))}});c.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks"});c.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:function(){d=this;d.active(c.dom.hasClass(c.getBody(),"mce-visualblocks"))},selectable:true,context:"view",prependToContext:true});c.on("init",function(){if(c.settings.visualblocks_default_state){c.execCommand("mceVisualBlocks",false,null,{skip_focus:true})}})});