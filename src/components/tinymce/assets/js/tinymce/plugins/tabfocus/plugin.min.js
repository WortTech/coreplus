// plugin.js
tinymce.PluginManager.add("tabfocus",function(d){var e=tinymce.DOM,f=tinymce.each,c=tinymce.explode;function a(g){if(g.keyCode===9){g.preventDefault()}}function b(l){var g,k,h,j;function m(p){k=e.select(":input:enabled,*[tabindex]:not(iframe)");function o(q){return q.nodeName==="BODY"||(q.type!="hidden"&&q.style.display!="none"&&q.style.visibility!="hidden"&&o(q.parentNode))}function i(q){return q.attributes.tabIndex.specified||q.nodeName=="INPUT"||q.nodeName=="TEXTAREA"}function n(q){return((!i(q)))&&q.getAttribute("tabindex")!="-1"&&o(q)}f(k,function(r,q){if(r.id==d.id){g=q;return false}});if(p>0){for(j=g+1;j<k.length;j++){if(n(k[j])){return k[j]}}}else{for(j=g-1;j>=0;j--){if(n(k[j])){return k[j]}}}return null}if(l.keyCode===9){h=c(d.getParam("tab_focus",d.getParam("tabfocus_elements",":prev,:next")));if(h.length==1){h[1]=h[0];h[0]=":prev"}if(l.shiftKey){if(h[0]==":prev"){k=m(-1)}else{k=e.get(h[0])}}else{if(h[1]==":next"){k=m(1)}else{k=e.get(h[1])}}if(k){if(k.id&&(d=tinymce.get(k.id||k.name))){d.focus()}else{window.setTimeout(function(){if(!tinymce.Env.webkit){window.focus()}k.focus()},10)}l.preventDefault()}}}d.on("keyup",a);if(tinymce.Env.gecko){d.on("keypress keydown",b)}else{d.on("keydown",b)}});